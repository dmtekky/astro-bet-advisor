import{c as v,D as y,s as x,E as w,A as L,R as c,j as l,r as S,b as a,d as C}from"./main-BDfILoKw.js";import{u as g}from"./useQuery-CEkj310x.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=v("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),q=o=>g({queryKey:["players",o],queryFn:async()=>y("players",x.from("players").select("*").eq("sport",o).order("name"),`Failed to fetch ${o} players`),staleTime:5*60*1e3}),T=o=>g({queryKey:["teams",o],queryFn:async()=>y("teams",x.from("teams").select("*").eq("sport",o).order("name"),`Failed to fetch ${o} teams`),staleTime:5*60*1e3}),E=()=>{const[o]=w(),{searchQuery:$}=L(),r=o.get("q")||"",[M,R]=c.useState("players"),i=["nba","mlb","nfl","boxing"],d=i.flatMap(s=>{var t;return((t=q(s).data)==null?void 0:t.map(e=>({...e,sport:s})))||[]}),m=i.flatMap(s=>{var t;return((t=T(s).data)==null?void 0:t.map(e=>({...e,sport:s})))||[]}),u=c.useMemo(()=>{if(!r.trim())return[];const s=r.toLowerCase().trim();return d.filter(t=>{var e,n;return((e=t.name)==null?void 0:e.toLowerCase().includes(s))||((n=t.team)==null?void 0:n.toLowerCase().includes(s))})},[d,r]),p=c.useMemo(()=>{if(!r.trim())return[];const s=r.toLowerCase().trim();return m.filter(t=>{var e,n;return((e=t.name)==null?void 0:e.toLowerCase().includes(s))||((n=t.abbreviation)==null?void 0:n.toLowerCase().includes(s))})},[m,r]);if(!r)return l("div",{className:"container py-8",children:[a("h1",{className:"text-2xl font-bold mb-4",children:"Search Results"}),a("p",{children:"Enter a search term to find players and teams."})]});const h=S.useMemo(()=>{const s=u.map(e=>({id:e.id,type:"player",displayName:e.name,subtitle:e.team||"",url:`/teams/${e.team_id}/players/${e.id}`,sport:e.sport,position:e.position,logo:e.image})),t=p.map(e=>({id:e.id,type:"team",displayName:e.name,subtitle:e.sport.toUpperCase(),url:`/teams/${e.id}`,sport:e.sport,logo:e.logo}));return[...s,...t].sort((e,n)=>{const b=e.displayName.toLowerCase().indexOf(r.toLowerCase()),N=n.displayName.toLowerCase().indexOf(r.toLowerCase());return b-N})},[u,p,r]);return r?l("div",{className:"container py-8",children:[l("h1",{className:"text-2xl font-bold mb-6",children:['Search results for "',r,'"']}),h.length>0?a("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:h.map(s=>a(C,{to:s.url,className:"block hover:opacity-90 transition-opacity",children:l("div",{className:"border rounded-lg p-4 h-full hover:bg-muted/50 transition-colors",children:[l("div",{className:"flex items-start gap-3",children:[s.logo&&a("img",{src:s.logo,alt:`${s.displayName} logo`,className:"w-10 h-10 object-contain rounded-full bg-muted p-1",onError:t=>{const e=t.target;e.style.display="none"}}),l("div",{className:"flex-1 min-w-0",children:[a("h3",{className:"font-semibold truncate",children:s.displayName}),l("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-primary/10 text-primary",children:s.type==="player"?"Player":"Team"}),a("span",{children:"â€¢"}),a("span",{className:"truncate",children:s.subtitle})]})]})]}),s.type==="player"&&"position"in s&&s.position&&a("div",{className:"mt-2 text-sm text-muted-foreground",children:s.position})]})},`${s.type}-${s.id}`))}):l("div",{className:"py-12 text-center",children:[a("div",{className:"bg-muted p-6 rounded-full inline-flex mb-4",children:a(f,{className:"h-8 w-8 text-muted-foreground"})}),a("h2",{className:"text-xl font-semibold mb-2",children:"No results found"}),l("p",{className:"text-muted-foreground",children:[`We couldn't find any players or teams matching "`,r,'"']})]})]}):l("div",{className:"container py-12 flex flex-col items-center justify-center min-h-[50vh] text-center",children:[a("div",{className:"bg-muted p-6 rounded-full mb-4",children:a(f,{className:"h-8 w-8 text-muted-foreground"})}),a("h1",{className:"text-2xl font-bold mb-2",children:"Search for players and teams"}),a("p",{className:"text-muted-foreground max-w-md",children:"Enter a player name or team to search across all sports"})]})};export{E as default};
//# sourceMappingURL=SearchResults-D_mbDwjA.js.map
