import{c as Ze,f as pt,g as Qe,h as bt,i as yt,k as _t,r as P,l as vt,b as r,j as m,B as wt,n as Ie,R as le,d as Ue,S as Ke,Z as Ne,m as z,o as xt,p as Se,P as et,q as He,T as ye,t as _e,v as ve,w as we,e as Tt,u as Nt,s as B,x as De}from"./main-BDfILoKw.js";import{D as St,a as Et,b as xe,c as At}from"./dropdown-menu-emNwNnvf.js";import{S as Ct,T as Pt,F as Ot}from"./twitter-yj-u9z9q.js";import{C as It}from"./Combination--yP-L3Ky.js";import{P as I}from"./index-CP622Ca8.js";import{B as me}from"./badge-CJuzmin7.js";import{A as kt,a as $t}from"./alert-Sqq6S7Qg.js";import{g as Mt,a as qe,P as jt}from"./PlayerCardNew-CgrIiSmF.js";import{c as ke,d as $e,C as Lt,a as Rt}from"./card-CC9ncavt.js";import{C as tt}from"./calendar-DtJsCdzD.js";import{f as Ft}from"./format-sbWH3_uq.js";import{I as ue}from"./info-Mrz3RB_M.js";import{C as Ut}from"./circle-alert-DkcW6Zbl.js";import{U as Ht}from"./users-C6uxgrdu.js";import"./chevron-right-Cv1hU44f.js";import"./trophy-CWWkOu6-.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=Ze("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=Ze("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);function Bt(t){t.values.forEach(e=>e.stop())}function Ee(t,e){[...e].reverse().forEach(n=>{const i=t.getVariant(n);i&&Qe(t,i),t.variantChildren&&t.variantChildren.forEach(s=>{Ee(s,e)})})}function Vt(t,e){if(Array.isArray(e))return Ee(t,e);if(typeof e=="string")return Ee(t,[e]);Qe(t,e)}function zt(){const t=new Set,e={subscribe(a){return t.add(a),()=>void t.delete(a)},start(a,n){const i=[];return t.forEach(s=>{i.push(pt(s,a,{transitionOverride:n}))}),Promise.all(i)},set(a){return t.forEach(n=>{Vt(n,a)})},stop(){t.forEach(a=>{Bt(a)})},mount(){return()=>{e.stop()}}};return e}function Gt(){const t=bt(zt);return yt(t.mount,[]),t}const rt=Gt,Yt={some:0,all:1};function Wt(t,e,{root:a,margin:n,amount:i="some"}={}){const s=_t(t),l=new WeakMap,o=d=>{d.forEach(g=>{const h=l.get(g.target);if(g.isIntersecting!==!!h)if(g.isIntersecting){const b=e(g.target,g);typeof b=="function"?l.set(g.target,b):c.unobserve(g.target)}else typeof h=="function"&&(h(g),l.delete(g.target))})},c=new IntersectionObserver(o,{root:a,rootMargin:n,threshold:typeof i=="number"?i:Yt[i]});return s.forEach(d=>c.observe(d)),()=>c.disconnect()}function Xt(t,{root:e,margin:a,amount:n,once:i=!1,initial:s=!1}={}){const[l,o]=P.useState(s);return P.useEffect(()=>{if(!t.current||i&&l)return;const c=()=>(o(!0),i?void 0:()=>o(!1)),d={root:e&&e.current||void 0,margin:a,amount:n};return Wt(t.current,c,d)},[e,t,a,i,n]),l}const Be=({team:t,className:e=""})=>{const[a,n]=P.useState(!1),{toast:i}=vt();if(!t||!t.leagueSlug||!t.teamSlug)return console.error("Missing required team data for sharing"),null;const s=`${window.location.origin}/teams/${t.teamSlug.toLowerCase()}`,l=t.astro_score??0,o=t.name||"This team",d=`${g(t.leagueSlug)} ${o}'s Astro Score: ${l}/100 - See how the stars align for their performance!`;function g(S){switch(S.toLowerCase()){case"mlb":return"⚾";case"nba":return"🏀";case"nfl":return"🏈";default:return"⭐"}}const h=S=>{try{console.log(`Shared ${o} via ${S}`,{teamId:t.id,teamName:o,astroScore:l,platform:S,timestamp:new Date().toISOString()})}catch(A){console.error("Error tracking share event:",A)}},b=S=>{let A="";switch(S){case"twitter":A=`https://twitter.com/intent/tweet?text=${encodeURIComponent(d)}&url=${encodeURIComponent(s)}`;break;case"facebook":A=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(s)}`;break}A&&(window.open(A,"_blank","noopener,noreferrer"),h(S))},f=()=>{navigator.clipboard.writeText(s).then(()=>{n(!0),i({title:"Link copied!",description:"Team link copied to clipboard"}),setTimeout(()=>n(!1),2e3),h("clipboard")}).catch(S=>{console.error("Failed to copy:",S),i({title:"Failed to copy",description:"Please copy the link manually",variant:"destructive"})})};return r("div",{className:`relative ${e}`,children:m(At,{children:[r(St,{asChild:!0,children:m(wt,{variant:"secondary",className:"flex items-center gap-2","aria-label":"Share team",children:[r(Ct,{className:"h-4 w-4"}),r("span",{children:"Share Team"})]})}),m(Et,{className:"w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700",children:[m(xe,{onClick:()=>b("twitter"),className:"flex items-center gap-3 p-3 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer transition-colors duration-200",children:[r(Pt,{className:"h-4 w-4 text-blue-400"}),r("span",{className:"text-sm",children:"Twitter"})]}),m(xe,{onClick:()=>b("facebook"),className:"flex items-center gap-3 p-3 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer transition-colors duration-200",children:[r(Ot,{className:"h-4 w-4 text-blue-600"}),r("span",{className:"text-sm",children:"Facebook"})]}),m(xe,{onClick:f,className:"flex items-center gap-3 p-3 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer transition-colors duration-200",children:[a?r(It,{className:"h-4 w-4 text-green-500"}):r(qt,{className:"h-4 w-4"}),r("span",{className:"text-sm",children:a?"Copied!":"Copy Link"})]})]})]})})};function Jt(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var at=P,Zt=Jt(at);function Ve(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Qt(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var Kt=!!(typeof window<"u"&&window.document&&window.document.createElement);function er(t,e,a){if(typeof t!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof e!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof a<"u"&&typeof a!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function n(i){return i.displayName||i.name||"Component"}return function(s){if(typeof s!="function")throw new Error("Expected WrappedComponent to be a React component.");var l=[],o;function c(){o=t(l.map(function(g){return g.props})),d.canUseDOM?e(o):a&&(o=a(o))}var d=function(g){Qt(h,g);function h(){return g.apply(this,arguments)||this}h.peek=function(){return o},h.rewind=function(){if(h.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var S=o;return o=void 0,l=[],S};var b=h.prototype;return b.UNSAFE_componentWillMount=function(){l.push(this),c()},b.componentDidUpdate=function(){c()},b.componentWillUnmount=function(){var S=l.indexOf(this);l.splice(S,1),c()},b.render=function(){return Zt.createElement(s,this.props)},h}(at.PureComponent);return Ve(d,"displayName","SideEffect("+n(s)+")"),Ve(d,"canUseDOM",Kt),d}}var tr=er;const rr=Ie(tr);var ar=typeof Element<"u",nr=typeof Map=="function",ir=typeof Set=="function",or=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function fe(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var a,n,i;if(Array.isArray(t)){if(a=t.length,a!=e.length)return!1;for(n=a;n--!==0;)if(!fe(t[n],e[n]))return!1;return!0}var s;if(nr&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(s=t.entries();!(n=s.next()).done;)if(!e.has(n.value[0]))return!1;for(s=t.entries();!(n=s.next()).done;)if(!fe(n.value[1],e.get(n.value[0])))return!1;return!0}if(ir&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(s=t.entries();!(n=s.next()).done;)if(!e.has(n.value[0]))return!1;return!0}if(or&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(a=t.length,a!=e.length)return!1;for(n=a;n--!==0;)if(t[n]!==e[n])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(i=Object.keys(t),a=i.length,a!==Object.keys(e).length)return!1;for(n=a;n--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[n]))return!1;if(ar&&t instanceof Element)return!1;for(n=a;n--!==0;)if(!((i[n]==="_owner"||i[n]==="__v"||i[n]==="__o")&&t.$$typeof)&&!fe(t[i[n]],e[i[n]]))return!1;return!0}return t!==t&&e!==e}var sr=function(e,a){try{return fe(e,a)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const lr=Ie(sr);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var ze=Object.getOwnPropertySymbols,cr=Object.prototype.hasOwnProperty,dr=Object.prototype.propertyIsEnumerable;function mr(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function ur(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},a=0;a<10;a++)e["_"+String.fromCharCode(a)]=a;var n=Object.getOwnPropertyNames(e).map(function(s){return e[s]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var fr=ur()?Object.assign:function(t,e){for(var a,n=mr(t),i,s=1;s<arguments.length;s++){a=Object(arguments[s]);for(var l in a)cr.call(a,l)&&(n[l]=a[l]);if(ze){i=ze(a);for(var o=0;o<i.length;o++)dr.call(a,i[o])&&(n[i[o]]=a[i[o]])}}return n};const hr=Ie(fr);var te={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},x={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(x).map(function(t){return x[t]});var k={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},ge={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},ce={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},gr=Object.keys(ge).reduce(function(t,e){return t[ge[e]]=e,t},{}),pr=[x.NOSCRIPT,x.SCRIPT,x.STYLE],X="data-react-helmet",br=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yr=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},_r=function(){function t(e,a){for(var n=0;n<a.length;n++){var i=a[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),Y=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},vr=function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},Ge=function(t,e){var a={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(a[n]=t[n]);return a},wr=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t},Ae=function(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return a===!1?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},xr=function(e){var a=ie(e,x.TITLE),n=ie(e,ce.TITLE_TEMPLATE);if(n&&a)return n.replace(/%s/g,function(){return Array.isArray(a)?a.join(""):a});var i=ie(e,ce.DEFAULT_TITLE);return a||i||void 0},Tr=function(e){return ie(e,ce.ON_CHANGE_CLIENT_STATE)||function(){}},Te=function(e,a){return a.filter(function(n){return typeof n[e]<"u"}).map(function(n){return n[e]}).reduce(function(n,i){return Y({},n,i)},{})},Nr=function(e,a){return a.filter(function(n){return typeof n[x.BASE]<"u"}).map(function(n){return n[x.BASE]}).reverse().reduce(function(n,i){if(!n.length)for(var s=Object.keys(i),l=0;l<s.length;l++){var o=s[l],c=o.toLowerCase();if(e.indexOf(c)!==-1&&i[c])return n.concat(i)}return n},[])},oe=function(e,a,n){var i={};return n.filter(function(s){return Array.isArray(s[e])?!0:(typeof s[e]<"u"&&Cr("Helmet: "+e+' should be of type "Array". Instead found type "'+br(s[e])+'"'),!1)}).map(function(s){return s[e]}).reverse().reduce(function(s,l){var o={};l.filter(function(b){for(var f=void 0,S=Object.keys(b),A=0;A<S.length;A++){var $=S[A],y=$.toLowerCase();a.indexOf(y)!==-1&&!(f===k.REL&&b[f].toLowerCase()==="canonical")&&!(y===k.REL&&b[y].toLowerCase()==="stylesheet")&&(f=y),a.indexOf($)!==-1&&($===k.INNER_HTML||$===k.CSS_TEXT||$===k.ITEM_PROP)&&(f=$)}if(!f||!b[f])return!1;var N=b[f].toLowerCase();return i[f]||(i[f]={}),o[f]||(o[f]={}),i[f][N]?!1:(o[f][N]=!0,!0)}).reverse().forEach(function(b){return s.push(b)});for(var c=Object.keys(o),d=0;d<c.length;d++){var g=c[d],h=hr({},i[g],o[g]);i[g]=h}return s},[]).reverse()},ie=function(e,a){for(var n=e.length-1;n>=0;n--){var i=e[n];if(i.hasOwnProperty(a))return i[a]}return null},Sr=function(e){return{baseTag:Nr([k.HREF,k.TARGET],e),bodyAttributes:Te(te.BODY,e),defer:ie(e,ce.DEFER),encode:ie(e,ce.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Te(te.HTML,e),linkTags:oe(x.LINK,[k.REL,k.HREF],e),metaTags:oe(x.META,[k.NAME,k.CHARSET,k.HTTPEQUIV,k.PROPERTY,k.ITEM_PROP],e),noscriptTags:oe(x.NOSCRIPT,[k.INNER_HTML],e),onChangeClientState:Tr(e),scriptTags:oe(x.SCRIPT,[k.SRC,k.INNER_HTML],e),styleTags:oe(x.STYLE,[k.CSS_TEXT],e),title:xr(e),titleAttributes:Te(te.TITLE,e)}},Ce=function(){var t=Date.now();return function(e){var a=Date.now();a-t>16?(t=a,e(a)):setTimeout(function(){Ce(e)},0)}}(),Ye=function(e){return clearTimeout(e)},Er=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||Ce:global.requestAnimationFrame||Ce,Ar=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||Ye:global.cancelAnimationFrame||Ye,Cr=function(e){return console&&typeof console.warn=="function"&&console.warn(e)},se=null,Pr=function(e){se&&Ar(se),e.defer?se=Er(function(){We(e,function(){se=null})}):(We(e),se=null)},We=function(e,a){var n=e.baseTag,i=e.bodyAttributes,s=e.htmlAttributes,l=e.linkTags,o=e.metaTags,c=e.noscriptTags,d=e.onChangeClientState,g=e.scriptTags,h=e.styleTags,b=e.title,f=e.titleAttributes;Pe(x.BODY,i),Pe(x.HTML,s),Or(b,f);var S={baseTag:ne(x.BASE,n),linkTags:ne(x.LINK,l),metaTags:ne(x.META,o),noscriptTags:ne(x.NOSCRIPT,c),scriptTags:ne(x.SCRIPT,g),styleTags:ne(x.STYLE,h)},A={},$={};Object.keys(S).forEach(function(y){var N=S[y],O=N.newTags,J=N.oldTags;O.length&&(A[y]=O),J.length&&($[y]=S[y].oldTags)}),a&&a(),d(e,A,$)},nt=function(e){return Array.isArray(e)?e.join(""):e},Or=function(e,a){typeof e<"u"&&document.title!==e&&(document.title=nt(e)),Pe(x.TITLE,a)},Pe=function(e,a){var n=document.getElementsByTagName(e)[0];if(n){for(var i=n.getAttribute(X),s=i?i.split(","):[],l=[].concat(s),o=Object.keys(a),c=0;c<o.length;c++){var d=o[c],g=a[d]||"";n.getAttribute(d)!==g&&n.setAttribute(d,g),s.indexOf(d)===-1&&s.push(d);var h=l.indexOf(d);h!==-1&&l.splice(h,1)}for(var b=l.length-1;b>=0;b--)n.removeAttribute(l[b]);s.length===l.length?n.removeAttribute(X):n.getAttribute(X)!==o.join(",")&&n.setAttribute(X,o.join(","))}},ne=function(e,a){var n=document.head||document.querySelector(x.HEAD),i=n.querySelectorAll(e+"["+X+"]"),s=Array.prototype.slice.call(i),l=[],o=void 0;return a&&a.length&&a.forEach(function(c){var d=document.createElement(e);for(var g in c)if(c.hasOwnProperty(g))if(g===k.INNER_HTML)d.innerHTML=c.innerHTML;else if(g===k.CSS_TEXT)d.styleSheet?d.styleSheet.cssText=c.cssText:d.appendChild(document.createTextNode(c.cssText));else{var h=typeof c[g]>"u"?"":c[g];d.setAttribute(g,h)}d.setAttribute(X,"true"),s.some(function(b,f){return o=f,d.isEqualNode(b)})?s.splice(o,1):l.push(d)}),s.forEach(function(c){return c.parentNode.removeChild(c)}),l.forEach(function(c){return n.appendChild(c)}),{oldTags:s,newTags:l}},it=function(e){return Object.keys(e).reduce(function(a,n){var i=typeof e[n]<"u"?n+'="'+e[n]+'"':""+n;return a?a+" "+i:i},"")},Ir=function(e,a,n,i){var s=it(n),l=nt(a);return s?"<"+e+" "+X+'="true" '+s+">"+Ae(l,i)+"</"+e+">":"<"+e+" "+X+'="true">'+Ae(l,i)+"</"+e+">"},kr=function(e,a,n){return a.reduce(function(i,s){var l=Object.keys(s).filter(function(d){return!(d===k.INNER_HTML||d===k.CSS_TEXT)}).reduce(function(d,g){var h=typeof s[g]>"u"?g:g+'="'+Ae(s[g],n)+'"';return d?d+" "+h:h},""),o=s.innerHTML||s.cssText||"",c=pr.indexOf(e)===-1;return i+"<"+e+" "+X+'="true" '+l+(c?"/>":">"+o+"</"+e+">")},"")},ot=function(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(e).reduce(function(n,i){return n[ge[i]||i]=e[i],n},a)},$r=function(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(e).reduce(function(n,i){return n[gr[i]||i]=e[i],n},a)},Mr=function(e,a,n){var i,s=(i={key:a},i[X]=!0,i),l=ot(n,s);return[le.createElement(x.TITLE,l,a)]},jr=function(e,a){return a.map(function(n,i){var s,l=(s={key:i},s[X]=!0,s);return Object.keys(n).forEach(function(o){var c=ge[o]||o;if(c===k.INNER_HTML||c===k.CSS_TEXT){var d=n.innerHTML||n.cssText;l.dangerouslySetInnerHTML={__html:d}}else l[c]=n[o]}),le.createElement(e,l)})},K=function(e,a,n){switch(e){case x.TITLE:return{toComponent:function(){return Mr(e,a.title,a.titleAttributes)},toString:function(){return Ir(e,a.title,a.titleAttributes,n)}};case te.BODY:case te.HTML:return{toComponent:function(){return ot(a)},toString:function(){return it(a)}};default:return{toComponent:function(){return jr(e,a)},toString:function(){return kr(e,a,n)}}}},st=function(e){var a=e.baseTag,n=e.bodyAttributes,i=e.encode,s=e.htmlAttributes,l=e.linkTags,o=e.metaTags,c=e.noscriptTags,d=e.scriptTags,g=e.styleTags,h=e.title,b=h===void 0?"":h,f=e.titleAttributes;return{base:K(x.BASE,a,i),bodyAttributes:K(te.BODY,n,i),htmlAttributes:K(te.HTML,s,i),link:K(x.LINK,l,i),meta:K(x.META,o,i),noscript:K(x.NOSCRIPT,c,i),script:K(x.SCRIPT,d,i),style:K(x.STYLE,g,i),title:K(x.TITLE,{title:b,titleAttributes:f},i)}},Lr=function(e){var a,n;return n=a=function(i){vr(s,i);function s(){return yr(this,s),wr(this,i.apply(this,arguments))}return s.prototype.shouldComponentUpdate=function(o){return!lr(this.props,o)},s.prototype.mapNestedChildrenToProps=function(o,c){if(!c)return null;switch(o.type){case x.SCRIPT:case x.NOSCRIPT:return{innerHTML:c};case x.STYLE:return{cssText:c}}throw new Error("<"+o.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},s.prototype.flattenArrayTypeChildren=function(o){var c,d=o.child,g=o.arrayTypeChildren,h=o.newChildProps,b=o.nestedChildren;return Y({},g,(c={},c[d.type]=[].concat(g[d.type]||[],[Y({},h,this.mapNestedChildrenToProps(d,b))]),c))},s.prototype.mapObjectTypeChildren=function(o){var c,d,g=o.child,h=o.newProps,b=o.newChildProps,f=o.nestedChildren;switch(g.type){case x.TITLE:return Y({},h,(c={},c[g.type]=f,c.titleAttributes=Y({},b),c));case x.BODY:return Y({},h,{bodyAttributes:Y({},b)});case x.HTML:return Y({},h,{htmlAttributes:Y({},b)})}return Y({},h,(d={},d[g.type]=Y({},b),d))},s.prototype.mapArrayTypeChildrenToProps=function(o,c){var d=Y({},c);return Object.keys(o).forEach(function(g){var h;d=Y({},d,(h={},h[g]=o[g],h))}),d},s.prototype.warnOnInvalidChildren=function(o,c){return!0},s.prototype.mapChildrenToProps=function(o,c){var d=this,g={};return le.Children.forEach(o,function(h){if(!(!h||!h.props)){var b=h.props,f=b.children,S=Ge(b,["children"]),A=$r(S);switch(d.warnOnInvalidChildren(h,f),h.type){case x.LINK:case x.META:case x.NOSCRIPT:case x.SCRIPT:case x.STYLE:g=d.flattenArrayTypeChildren({child:h,arrayTypeChildren:g,newChildProps:A,nestedChildren:f});break;default:c=d.mapObjectTypeChildren({child:h,newProps:c,newChildProps:A,nestedChildren:f});break}}}),c=this.mapArrayTypeChildrenToProps(g,c),c},s.prototype.render=function(){var o=this.props,c=o.children,d=Ge(o,["children"]),g=Y({},d);return c&&(g=this.mapChildrenToProps(c,g)),le.createElement(e,g)},_r(s,null,[{key:"canUseDOM",set:function(o){e.canUseDOM=o}}]),s}(le.Component),a.propTypes={base:I.object,bodyAttributes:I.object,children:I.oneOfType([I.arrayOf(I.node),I.node]),defaultTitle:I.string,defer:I.bool,encodeSpecialCharacters:I.bool,htmlAttributes:I.object,link:I.arrayOf(I.object),meta:I.arrayOf(I.object),noscript:I.arrayOf(I.object),onChangeClientState:I.func,script:I.arrayOf(I.object),style:I.arrayOf(I.object),title:I.string,titleAttributes:I.object,titleTemplate:I.string},a.defaultProps={defer:!0,encodeSpecialCharacters:!0},a.peek=e.peek,a.rewind=function(){var i=e.rewind();return i||(i=st({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),i},n},Rr=function(){return null},Fr=rr(Sr,Pr,st)(Rr),Oe=Lr(Fr);Oe.renderStatic=Oe.rewind;function Ur({players:t,teamId:e}){const[a,n]=P.useState({key:"impact_score",direction:"desc"}),i=P.useMemo(()=>{if(!t)return[];let o=[...t];return a.key&&o.sort((c,d)=>c[a.key]===null||c[a.key]===void 0?1:d[a.key]===null||d[a.key]===void 0?-1:c[a.key]<d[a.key]?a.direction==="asc"?-1:1:c[a.key]>d[a.key]?a.direction==="asc"?1:-1:0),o},[t,a]),s=o=>{let c="desc";a.key===o&&a.direction==="desc"&&(c="asc"),n({key:o,direction:c})},l=o=>o==null?"bg-gray-200":o>=80?"bg-green-500":o>=60?"bg-blue-500":o>=40?"bg-yellow-500":"bg-red-500";return!t||t.length===0?r("div",{className:"px-4 py-8 text-center text-slate-500",children:"No players available for this team"}):r("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:r("div",{className:"overflow-x-auto",children:m("table",{className:"w-full",children:[r("thead",{children:m("tr",{className:"bg-slate-100",children:[r("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider relative group cursor-help",title:"Player",children:r("span",{className:"truncate inline-block max-w-[60px]",children:"Player"})}),r("th",{className:"px-2 py-3 text-center text-xs font-medium text-slate-500 uppercase tracking-wider relative group",title:"Jersey Number",children:r("span",{className:"truncate inline-block",children:"#"})}),r("th",{className:"px-2 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider relative group",title:"Position",children:r("span",{className:"truncate inline-block max-w-[60px]",children:"Pos"})}),r("th",{className:"px-3 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider cursor-pointer hover:bg-slate-200 transition-colors relative group",onClick:()=>s("impact_score"),title:"Impact Score",children:m("div",{className:"flex items-center justify-end",children:[r("span",{className:"truncate inline-block",children:"Impact"}),r(Dt,{className:"ml-1 h-3 w-3 flex-shrink-0"}),a.key==="impact_score"&&r("span",{className:"ml-0.5",children:a.direction==="asc"?"↑":"↓"})]})}),r("th",{className:"px-3 py-3 text-right text-xs font-medium text-slate-500 uppercase tracking-wider relative group",title:"Hits",children:r("span",{className:"truncate inline-block",children:"H"})}),r("th",{className:"px-3 py-3 text-right text-xs font-medium text-slate-500 uppercase tracking-wider relative group",title:"Runs",children:r("span",{className:"truncate inline-block",children:"R"})}),r("th",{className:"px-3 py-3 text-right text-xs font-medium text-slate-500 uppercase tracking-wider relative group",title:"Fielding Assists",children:r("span",{className:"truncate inline-block",children:"A"})}),r("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider"})]})}),r("tbody",{className:"divide-y divide-slate-200",children:i.map((o,c)=>m("tr",{className:c%2===0?"bg-white":"bg-slate-50",children:[r("td",{className:"px-4 py-3 whitespace-nowrap",children:r("a",{href:`/teams/${e}/player-details/${o.player_id}`,className:"hover:opacity-80 transition-opacity",children:m("div",{className:"flex items-center",children:[r("div",{className:"h-10 w-10 flex-shrink-0 mr-3",children:r("img",{className:"h-10 w-10 rounded-full object-cover",src:o.headshot_url||"/placeholder-player.png",alt:o.full_name,onError:d=>{d.target.src="/placeholder-player.png"}})}),r("div",{children:r("div",{className:"text-sm font-medium text-slate-900 hover:text-blue-600 transition-colors",children:o.full_name})})]})})}),r("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-500",children:o.number||"N/A"}),r("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-500",children:o.position||"N/A"}),r("td",{className:"px-4 py-3 whitespace-nowrap",children:o.impact_score!==void 0&&o.impact_score!==null?m("div",{className:"flex items-center",children:[r("span",{className:"mr-2 font-medium",children:o.impact_score}),r("div",{className:"relative w-16 h-2 bg-slate-200 rounded-full overflow-hidden",children:r("div",{className:`h-full ${l(o.impact_score)}`,style:{width:`${Math.min(100,Math.max(0,o.impact_score))}%`}})})]}):r("span",{className:"text-slate-400",children:"—"})}),r("td",{className:"px-4 py-3 whitespace-nowrap text-right text-sm text-slate-500",children:o.stats_batting_hits!==void 0?o.stats_batting_hits:"N/A"}),r("td",{className:"px-4 py-3 whitespace-nowrap text-right text-sm text-slate-500",children:o.stats_batting_runs!==void 0?o.stats_batting_runs:"N/A"}),r("td",{className:"px-4 py-3 whitespace-nowrap text-right text-sm text-slate-500",children:o.stats_fielding_assists!==void 0?o.stats_fielding_assists:"N/A"}),r("td",{className:"px-4 py-3 whitespace-nowrap text-right text-sm font-medium",children:r("a",{href:`/teams/${e}/player-details/${o.player_id}`,className:"text-blue-600 hover:text-blue-900",children:"View"})})]},o.id))})]})})})}const Hr=({game:t,homeTeam:e,awayTeam:a,defaultLogo:n,className:i=""})=>{var f,S,A,$;console.log("GameCard game_date:",t.game_date,"game_time_utc:",t.game_time_utc,"full game:",t);let s;try{t.game_date?s=new Date(t.game_date):t.game_time_utc?s=new Date(t.game_time_utc):t.updated_at?s=new Date(t.updated_at):s=new Date,isNaN(s.getTime())&&(console.warn("Invalid game date, using current date as fallback"),s=new Date)}catch(y){console.error("Error parsing game date:",y),s=new Date}const l=t.status==="in_progress"||t.status==="in-progress",o=(y,N)=>!y||typeof y=="string"?N:"primary_color"in y&&y.primary_color||N,c=o(e,"#6366f1"),d=o(a,"#8b5cf6"),g=y=>!y||typeof y=="string"?n:"logo_url"in y&&y.logo_url?y.logo_url:"logo"in y&&y.logo?y.logo:n,h=y=>!y||typeof y=="string"?"":"record"in y&&y.record?y.record:"wins"in y&&"losses"in y&&y.wins!==void 0&&y.losses!==void 0?`${y.wins}-${y.losses}`:"",b=y=>{try{if(isNaN(y.getTime()))return m("div",{className:"flex flex-col items-center",children:[r("div",{className:"text-sm font-medium",children:"TBD"}),r("div",{className:"text-xs text-muted-foreground",children:"--"})]});const N=new Date(y),O=N.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone}),J=N.toLocaleDateString("en-US",{month:"short",day:"numeric",timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone});return m("div",{className:"flex flex-col items-center",children:[r("div",{className:"text-sm font-medium",children:O}),r("div",{className:"text-xs text-muted-foreground",children:J})]})}catch(N){return console.error("Error formatting game time:",N),m("div",{className:"flex flex-col items-center",children:[r("div",{className:"text-sm font-medium",children:"TBD"}),r("div",{className:"text-xs text-muted-foreground",children:"--"})]})}};return m($e,{className:`w-[252px] md:w-[336px] flex-shrink-0 bg-white border-0.5 border-gray-200 hover:shadow-md transition-shadow duration-300 overflow-hidden ${i}`,children:[r("div",{className:`h-1 w-full ${l?"bg-red-500":"bg-gradient-to-r from-blue-500 to-indigo-600"}`}),m(ke,{className:"p-4",children:[m("div",{className:"flex justify-between items-center mb-3",children:[m("div",{className:"flex items-center space-x-1",children:[r(tt,{className:"h-3.5 w-3.5 text-gray-500"}),r("span",{className:"text-xs text-gray-600",children:isNaN(s.getTime())?"Date TBD":Ft(s,"EEE, MMM d")})]}),l?r(me,{variant:"destructive",className:"h-5 text-[10px] px-1.5 animate-pulse",children:"LIVE"}):r("span",{className:"text-gray-700",children:b(s)})]}),m("div",{className:"flex items-center justify-between",children:[m(Ue,{to:`/teams/${e.id}`,className:"flex flex-col items-center w-2/5 group/team",onClick:y=>y.stopPropagation(),children:[m("div",{className:"relative",children:[r("div",{className:"absolute inset-0 rounded-full opacity-0 group-hover/team:opacity-100 transition-opacity duration-300",style:{background:`radial-gradient(circle at center, ${c}15, transparent 70%)`}}),r("img",{src:g(e),alt:e.name,className:"relative z-10 w-16 h-16 object-contain transition-transform duration-300 group-hover/team:scale-110",onError:y=>{const N=y.target;N.src=n}})]}),r("span",{className:"font-semibold text-center mt-1 text-sm text-gray-800 truncate w-full px-1 group-hover/team:text-blue-600 transition-colors",children:typeof e=="string"?e:e.name}),h(e)&&r("span",{className:"text-xs text-gray-500 group-hover/team:text-blue-500 transition-colors",children:h(e)})]}),m("div",{className:"flex flex-col items-center px-2",children:[r("div",{className:"text-4xl font-black text-gray-800 mb-2",children:"VS"}),((f=t.venue)==null?void 0:f.name)&&r("div",{className:"mt-2 text-xs text-center text-gray-500 max-w-[120px] truncate",children:t.venue.name}),r("div",{className:"h-12"}),t.astroInfluence&&r("div",{className:"mt-2",children:m(me,{variant:"outline",className:"h-6 text-xs px-2 bg-purple-50 text-purple-700 border-purple-200 hover:bg-purple-100 whitespace-nowrap",children:[r(Ke,{className:"w-3 h-3 mr-1 text-purple-500"}),t.astroInfluence]})})]}),m(Ue,{to:`/teams/${typeof a=="string"?"":a.id}`,className:"flex flex-col items-center w-2/5 group/team",onClick:y=>y.stopPropagation(),children:[m("div",{className:"relative",children:[r("div",{className:"absolute inset-0 rounded-full opacity-0 group-hover/team:opacity-100 transition-opacity duration-300",style:{background:`radial-gradient(circle at center, ${d}15, transparent 70%)`}}),r("img",{src:g(a),alt:typeof a=="string"?a:a.name,className:"relative z-10 w-16 h-16 object-contain transition-transform duration-300 group-hover/team:scale-110",onError:y=>{const N=y.target;N.src=n}})]}),r("span",{className:"font-semibold text-center mt-1 text-sm text-gray-800 truncate w-full px-1 group-hover/team:text-blue-600 transition-colors",children:typeof a=="string"?a:a.name}),h(a)&&r("span",{className:"text-xs text-gray-500 group-hover/team:text-blue-500 transition-colors",children:h(a)})]})]}),t.odds&&t.odds.length>0&&((S=t.odds[0])==null?void 0:S.market)&&r("div",{className:"mt-3 pt-2 border-t border-gray-100",children:m("div",{className:"flex items-center justify-center space-x-2",children:[r(Ne,{className:"w-4 h-4 text-yellow-500"}),m("span",{className:"text-sm font-medium text-gray-700",children:[t.odds[0].market,": ",((A=t.odds[0])==null?void 0:A.outcome)||""," ",($=t.odds[0])!=null&&$.price?(t.odds[0].price>0?"+":"")+t.odds[0].price:""]}),t.astroEdge&&m(me,{variant:"secondary",className:"h-6 text-xs px-2 bg-blue-50 text-blue-700 border-blue-200",children:["⚡ ",t.astroEdge.toFixed(1),"% Edge"]})]})})]})]})},Dr=()=>{const[t,e]=P.useState({width:typeof window<"u"?window.innerWidth:0,height:typeof window<"u"?window.innerHeight:0});return P.useEffect(()=>{const a=()=>{e({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",a),a(),()=>window.removeEventListener("resize",a)},[]),t},qr=({games:t,defaultLogo:e,className:a=""})=>{const[n,i]=P.useState(0),[s,l]=P.useState(!1),o=P.useRef(null),c=rt(),d=Dr(),g=()=>d.width?d.width<640?d.width*.85:d.width<1024?d.width*.5-32:336:336,[h,b]=P.useState(g()),f=d.width<640?16:32;P.useEffect(()=>{b(g())},[d.width]);const S=(N,O)=>{if(l(!1),Math.abs(O.offset.x)<h*.2){c.start({x:-n*(h+f),transition:{type:"spring",bounce:.3}});return}const J=O.offset.x<0?1:-1;let W=n+J;W=Math.max(0,Math.min(W,t.length-1)),i(W),c.start({x:-W*(h+f),transition:{type:"spring",damping:30,stiffness:300,mass:.5}})},A=()=>{l(!0)},$=N=>{s&&N.preventDefault()};if(P.useEffect(()=>{const N=o.current;if(N)return N.addEventListener("touchmove",$,{passive:!1}),()=>{N.removeEventListener("touchmove",$)}},[s]),P.useEffect(()=>{c.start({x:-n*(h+f)})},[h,f,n,c]),t.length===0)return r("div",{className:"text-center py-8 text-gray-500",children:"No upcoming games scheduled"});const y=t.length*(h+f)-f;return m("div",{className:`relative w-full overflow-hidden ${a}`,children:[r(z.div,{ref:o,className:"w-full py-4 px-4",drag:"x",dragConstraints:{left:-y+h,right:0},onDragStart:A,onDragEnd:S,animate:c,dragElastic:.1,style:{cursor:s?"grabbing":"grab"},children:r(z.div,{className:"flex",style:{width:y,gap:`${f}px`},children:t.map((N,O)=>r(z.div,{className:"flex-shrink-0",style:{width:h,scale:n===O?1:.95,opacity:n===O?1:.8,transition:"all 0.3s ease"},whileTap:{scale:.98},children:r(Hr,{game:N,homeTeam:N.home_team,awayTeam:N.away_team,defaultLogo:e,className:"w-full h-full"})},N.id))})}),t.length>1&&r("div",{className:"flex justify-center mt-4 space-x-2",children:t.map((N,O)=>r("button",{onClick:()=>{i(O),c.start({x:-O*(h+f),transition:{type:"spring",damping:30,stiffness:300,mass:.5}})},className:`w-2 h-2 rounded-full transition-all ${O===n?"bg-blue-600 w-6":"bg-gray-300 hover:bg-gray-400"}`,"aria-label":`Go to slide ${O+1}`},O))})]})},Br=t=>{const e=(t==null?void 0:t.primary_color)||"#1e40af",a=(t==null?void 0:t.secondary_color)||"#60a5fa";return{primary:e,secondary:a,gradientBg:`linear-gradient(to bottom, ${e}10, #f8fafc)`,highlight:`${e}33`}};var Me="Progress",je=100,[Vr,pa]=xt(Me),[zr,Gr]=Vr(Me),lt=P.forwardRef((t,e)=>{const{__scopeProgress:a,value:n=null,max:i,getValueLabel:s=Yr,...l}=t;(i||i===0)&&!Xe(i)&&console.error(Wr(`${i}`,"Progress"));const o=Xe(i)?i:je;n!==null&&!Je(n,o)&&console.error(Xr(`${n}`,"Progress"));const c=Je(n,o)?n:null,d=pe(c)?s(c,o):void 0;return Se.jsx(zr,{scope:a,value:c,max:o,children:Se.jsx(et.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":pe(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":mt(c,o),"data-value":c??void 0,"data-max":o,...l,ref:e})})});lt.displayName=Me;var ct="ProgressIndicator",dt=P.forwardRef((t,e)=>{const{__scopeProgress:a,...n}=t,i=Gr(ct,a);return Se.jsx(et.div,{"data-state":mt(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...n,ref:e})});dt.displayName=ct;function Yr(t,e){return`${Math.round(t/e*100)}%`}function mt(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function pe(t){return typeof t=="number"}function Xe(t){return pe(t)&&!isNaN(t)&&t>0}function Je(t,e){return pe(t)&&!isNaN(t)&&t<=e&&t>=0}function Wr(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${je}\`.`}function Xr(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${je} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var ut=lt,Jr=dt;const ft=P.forwardRef(({className:t,value:e,indicatorClassName:a,...n},i)=>r(ut,{ref:i,className:He("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:r(Jr,{className:He("h-full w-full flex-1 bg-primary transition-all",a),style:{transform:`translateX(-${100-(e||0)}%)`}})}));ft.displayName=ut.displayName;const Zr=({chemistry:t,className:e=""})=>{console.log("TeamChemistryMeter - Received chemistry prop:",t);const n=(()=>{const{fire:f,earth:S,air:A,water:$,...y}=t.elements,N={fire:f,earth:S,air:A,water:$},[O]=Object.entries(N).sort((J,W)=>W[1]-J[1])[0];return O})(),i={fire:"Fire",earth:"Earth",air:"Air",water:"Water"}[n],s={fire:"bg-red-50 text-red-800 border-red-200",earth:"bg-amber-50 text-amber-800 border-amber-200",air:"bg-blue-50 text-blue-800 border-blue-200",water:"bg-blue-50 text-blue-800 border-blue-200"},l=f=>f>=75?"text-emerald-500":f>=50?"text-amber-500":f>=25?"text-orange-500":"text-red-500",o=f=>f>=75?"bg-emerald-500":f>=50?"bg-amber-500":f>=25?"bg-orange-500":"bg-red-500",c=new Date(t.calculatedAt).toLocaleString(),d=rt(),g=P.useRef(null),h=Xt(g,{once:!0,amount:.1});P.useEffect(()=>{h&&d.start({opacity:1,width:"100%",transition:{duration:.8,ease:"easeOut"}})},[h,t,d]);const b=(f,S)=>{const A=t.elements[f],$=Mt(f);qe(f);const y={fire:"bg-red-500",earth:"bg-amber-700",air:"bg-blue-400",water:"bg-blue-600"}[f];return m("div",{className:"mb-3 sm:mb-4",children:[m("div",{className:"flex items-center justify-between text-xs sm:text-sm text-slate-600 mb-1",children:[m("span",{className:"font-medium flex items-center",children:[r("span",{className:"mr-1 sm:mr-2",role:"img","aria-label":f,children:$}),r("span",{className:"whitespace-nowrap",children:S})]}),m(z.span,{className:`font-semibold text-xs sm:text-sm ${f===n?"text-white bg-opacity-20 px-1.5 py-0.5 rounded":""}`,style:f===n?{backgroundColor:qe(f)}:{},initial:{opacity:0,y:5},animate:h?{opacity:1,y:0}:{opacity:0,y:5},transition:{delay:.3,duration:.8,ease:"easeOut"},children:[Math.round(A),"%"]})]}),r("div",{className:"h-2 sm:h-2.5 bg-slate-100 rounded-full overflow-hidden",children:r(z.div,{className:`h-full ${y} rounded-full ${f===n?"ring-2 ring-offset-1 ring-opacity-70 ring-white":""}`,initial:{width:0},animate:h?{width:`${A}%`}:{width:0},transition:{duration:1.5,ease:[.16,1,.3,1],delay:.2}})})]},f)};return r("div",{className:e,ref:g,children:m($e,{className:"overflow-hidden border-2 border-slate-200 shadow-sm h-full flex flex-col",children:[m(Lt,{className:"bg-gradient-to-r from-indigo-800 to-purple-800 text-white pb-4",children:[m("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center space-y-2 md:space-y-0",children:[m(Rt,{className:"text-2xl font-bold flex items-center",children:[r("span",{className:"bg-white/10 px-3 py-1 rounded-full text-sm font-semibold mr-3",children:"Astro Chemistry"}),r(ye,{children:m(_e,{children:[r(ve,{asChild:!0,children:r(ue,{className:"h-4 w-4 cursor-help opacity-80 hover:opacity-100 transition-opacity"})}),r(we,{className:"max-w-xs bg-slate-800 text-white border-0",children:r("p",{children:"Astro Chemistry measures the astrological compatibility among players, weighted by their impact scores. Higher scores indicate better performance potential."})})]})})]}),m("div",{className:`text-4xl font-bold ${l(t.score)} drop-shadow-md`,children:[Math.round(t.score),r("span",{className:"text-xl opacity-80",children:"/100"})]})]}),r(z.div,{className:"mt-3",initial:{opacity:0,y:15},animate:h?{opacity:1,y:0}:{opacity:0,y:15},transition:{duration:.8,ease:[.16,1,.3,1]},children:r(z.div,{initial:{opacity:0,scaleX:.9},animate:h?{opacity:1,scaleX:1}:{opacity:0,scaleX:.9},transition:{delay:.4,duration:1.2,ease:[.16,1,.3,1]},children:r(ft,{value:t.score,className:"h-2.5 bg-white/20 overflow-hidden",indicatorClassName:`${o(t.score)} shadow-lg transition-all duration-1500 ease-[cubic-bezier(0.16,1,0.3,1)]`})})})]}),m(ke,{className:"flex-1 p-6",children:[m("div",{className:"mb-6 sm:mb-8",children:[m("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2 mb-3 sm:mb-4",children:[r("div",{className:"flex items-center",children:m("h3",{className:"text-base sm:text-lg font-semibold text-slate-800 flex items-center",children:["Team Elemental Balance",r(ye,{children:m(_e,{children:[r(ve,{asChild:!0,children:r(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 ml-1.5 sm:ml-2 cursor-help text-slate-400 hover:text-slate-600"})}),r(we,{className:"max-w-xs bg-slate-800 text-white border-0 text-sm",children:r("p",{children:"Shows the distribution of astrological elements in the team. A balanced team (about 25% each) scores higher."})})]})})]})}),r("div",{className:`text-sm font-medium px-3 py-1 rounded-md inline-flex items-center border ${s[n]}`,children:m("span",{className:"font-semibold",children:[i," Dominant"]})})]}),m("div",{className:"grid grid-cols-2 gap-4 sm:gap-6",children:[b("fire","Fire"),b("earth","Earth"),b("air","Air"),b("water","Water")]})]}),t.aspects&&m("div",{className:"mb-6",children:[r("div",{className:"flex items-center mb-3 sm:mb-4",children:m("h3",{className:"text-base sm:text-lg font-semibold text-slate-800 flex items-center",children:["Astrological Aspects",r(ye,{children:m(_e,{children:[r(ve,{asChild:!0,children:r(ue,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4 ml-1.5 sm:ml-2 cursor-help text-slate-400 hover:text-slate-600"})}),r(we,{className:"max-w-xs bg-slate-800 text-white border-0 text-sm",children:r("p",{children:"Measures the astrological aspects between players. Higher harmony scores indicate better compatibility."})})]})})]})}),m("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:[m("div",{className:"bg-slate-50 p-3 sm:p-4 rounded-lg border border-slate-100",children:[r("div",{className:"text-xs sm:text-sm font-medium text-slate-500 mb-1",children:"Harmony"}),m("div",{className:"text-xl sm:text-2xl font-bold text-emerald-600",children:[Math.round(t.aspects.harmonyScore),"%"]}),r("div",{className:"h-1.5 bg-slate-100 rounded-full mt-2 overflow-hidden",children:r(z.div,{className:"h-full bg-emerald-500 rounded-full",initial:{width:0},animate:h?{width:`${t.aspects.harmonyScore}%`}:{width:0},transition:{duration:1.8,ease:[.16,1,.3,1],delay:.4}})})]}),m("div",{className:"bg-slate-50 p-3 sm:p-4 rounded-lg border border-slate-100",children:[r("div",{className:"text-xs sm:text-sm font-medium text-slate-500 mb-1",children:"Challenges"}),m("div",{className:"text-xl sm:text-2xl font-bold text-amber-600",children:[Math.round(t.aspects.challengeScore),"%"]}),r("div",{className:"h-1.5 bg-slate-100 rounded-full mt-2 overflow-hidden",children:r(z.div,{className:"h-full bg-amber-500 rounded-full",initial:{width:0},animate:h?{width:`${t.aspects.challengeScore}%`}:{width:0},transition:{duration:1.8,ease:[.16,1,.3,1],delay:.6}})})]})]})]})," ",m(z.div,{className:"text-xs text-slate-400 text-right mt-auto pt-4 border-t border-slate-100",initial:{opacity:0,y:10},animate:h?{opacity:1,y:0}:{opacity:0,y:10},transition:{delay:.8,duration:.8,ease:[.16,1,.3,1]},children:["Last updated: ",c]})]})]})})};function Qr(t){if(!t)return 0;let e=0;return t.stats_batting_hits&&(e+=t.stats_batting_hits*.5),t.stats_batting_runs&&(e+=t.stats_batting_runs*.75),t.stats_fielding_assists&&(e+=t.stats_fielding_assists*.3),e=Math.min(100,Math.max(0,e)),Math.round(e)}const Kr=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/,he=t=>t?Kr.test(t):!1;console.log("VITE_SUPABASE_URL:","https://awoxkynorbspcrrggbca.supabase.co");console.log("VITE_SUPABASE_KEY:","***");console.log("Supabase client:",B);const de=async t=>{var e;try{const{data:{session:a}}=await B.auth.getSession();console.log("[fetchTeamChemistry] Authentication state:",(e=a==null?void 0:a.user)!=null&&e.email?`Authenticated as ${a.user.email}`:"Not authenticated"),console.log("[fetchTeamChemistry] Fetching chemistry for team ID:",t);const{data:n,error:i}=await B.from("team_chemistry").select("*").eq("team_id",t).maybeSingle();if(n&&!i){console.log("[fetchTeamChemistry] Found chemistry data in team_chemistry table");let s={};try{const l=typeof n.elements=="string"?JSON.parse(n.elements):n.elements||{};s={fire:typeof l.fire=="number"?l.fire:25,earth:typeof l.earth=="number"?l.earth:25,air:typeof l.air=="number"?l.air:25,water:typeof l.water=="number"?l.water:25,balance:typeof l.balance=="number"?l.balance:50,...l}}catch(l){console.error("[fetchTeamChemistry] Error parsing elements JSON:",l),s={fire:25,earth:25,air:25,water:25,balance:50}}return{score:n.score||50,elements:{fire:s.fire||25,earth:s.earth||25,air:s.air||25,water:s.water||25,balance:s.balance||50},aspects:{harmonyScore:50,challengeScore:20,netHarmony:50},calculatedAt:n.last_updated||new Date().toISOString()}}if(i&&console.error("[fetchTeamChemistry] Team chemistry query error:",{message:i.message,code:i.code,details:i.details,hint:i.hint}),t&&he(t)){console.log("[fetchTeamChemistry] Using NBA-specific fallback");const{data:s,error:l}=await B.from("nba_teams").select("chemistry_score, elemental_balance, last_astro_update").eq("id",t).single();if(!l&&s){console.log("[fetchTeamChemistry] Found chemistry data in nba_teams");const o=typeof s.elemental_balance=="string"?JSON.parse(s.elemental_balance):s.elemental_balance;return{score:s.chemistry_score||50,elements:{fire:(o==null?void 0:o.fire)||25,earth:(o==null?void 0:o.earth)||25,air:(o==null?void 0:o.air)||25,water:(o==null?void 0:o.water)||25,balance:(o==null?void 0:o.balance)||50},aspects:{harmonyScore:50,challengeScore:20,netHarmony:50},calculatedAt:s.last_astro_update||new Date().toISOString()}}}return console.log("[fetchTeamChemistry] No chemistry data found"),null}catch(a){return console.error("[fetchTeamChemistry] Unhandled error:",a),null}},ba=()=>{var Le,Re;const t=Tt(),e=t.identifier||t.teamId||t.id,a=he(e),n=!a&&e?/^\d+$/.test(e):!1,i=a||n?e:null,s=!a&&!n?e:t.slug;console.log("[TeamPage] Team ID from URL:",i),console.log("[TeamPage] Team Slug from URL:",s),!i&&!s&&console.error("[TeamPage] No team ID or slug found in URL parameters"),Nt();const[l,o]=P.useState(null),[c,d]=P.useState([]),[g,h]=P.useState([]),[b,f]=P.useState(null),[S,A]=P.useState(!0),[$,y]=P.useState([]),[N,O]=P.useState(!0),[J,W]=P.useState(null);P.useEffect(()=>{if(!i&&!s){W("No team ID or slug provided"),O(!1);return}(async()=>{var G;try{O(!0),console.log("[TeamPage] Fetching NBA team data for ID:",i);const V=i?/^\d+$/.test(i):!1;let H=B.from("nba_teams").select("*");he(i)?H=H.eq("id",i):V?H=H.eq("external_team_id",i):H=H.eq("abbreviation",i.toUpperCase());const{data:T,error:ee}=await H.single();if(console.log("[TeamPage] NBA team query result:",{nbaTeam:T,nbaTeamError:ee}),T){console.log("[TeamPage] Found NBA team:",T.name),o({id:((G=T.id)==null?void 0:G.toString())??"",name:T.name??"",logo_url:T.logo_url??"/placeholder-team.png",city:T.city??"",venue:"str_stadium"in T?T.str_stadium??"":"",conference:T.conference??"",division:T.division??"",abbreviation:T.abbreviation??"",primary_color:"primary_color"in T?T.primary_color??"#17408B":"#17408B",secondary_color:"secondary_color"in T?T.secondary_color??"#C9082A":"#C9082A",league_id:"nba",external_id:T.external_team_id??T.id,intFormedYear:"int_formed_year"in T?T.int_formed_year??"":"",strStadium:"str_stadium"in T?T.str_stadium??"":"",strDescriptionEN:"str_description_en"in T?T.str_description_en??"":"",sport:"Basketball",league:{id:"nba",name:"NBA",sport:"Basketball"}}),console.log("[TeamPage] Fetching players for team:",T.external_team_id);const{data:v,error:p}=await B.from("nba_players").select("*, impact_score, astro_influence").eq("team_id",T.external_team_id);if(console.log("[TeamPage] Players query result:",{playerCount:v==null?void 0:v.length,error:p}),p){W(p.message),O(!1);return}const L=v.map(w=>({id:w.id,player_id:w.external_player_id,full_name:`${w.first_name||""} ${w.last_name||""}`.trim(),first_name:w.first_name,last_name:w.last_name,headshot_url:w.photo_url,position:w.primary_position,number:w.jersey_number,team_id:w.team_id,team_name:T.name,birth_date:w.birth_date,is_active:w.active,impact_score:w.impact_score??null,astro_influence:w.astro_influence??null}));if(T.id){const w=await de(T.id.toString());w?(console.log("[TeamPage] Setting chemistry data (NBA):",w),f(w)):(console.log("[TeamPage] Using default chemistry data (NBA)"),f({score:50,elements:{fire:25,earth:25,air:25,water:25,balance:50},aspects:{harmonyScore:50,challengeScore:20,netHarmony:50},calculatedAt:new Date().toISOString()}))}else console.warn("[TeamPage] NBA team id is missing, skipping chemistry fetch."),f({score:50,elements:{fire:25,earth:25,air:25,water:25,balance:50},aspects:{harmonyScore:50,challengeScore:20,netHarmony:50},calculatedAt:new Date().toISOString()});const u=[...L].sort((w,R)=>{const E=w.impact_score?parseFloat(String(w.impact_score)):0,C=R.impact_score?parseFloat(String(R.impact_score)):0;return E>C?-1:E<C?1:(w.last_name||"").localeCompare(R.last_name||"")});d(u),h(u.slice(0,4)),O(!1);return}let U=B.from("teams").select(`*,
            league:league_id(*)
          `);if(s){console.log("[TeamPage] Fetching team by slug:",s);try{const{data:v,error:p}=await B.from("teams").select("*, league:league_id(*)").eq("slug",s).single();if(v&&!p){if(o(v),v.id)try{const L=await de(v.id);L&&f(L)}catch(L){console.error("[TeamPage] Error fetching chemistry data:",L)}finally{A(!1)}ht(v.id),O(!1);return}else console.log("[TeamPage] No exact slug match found, continuing with fallback approaches"),console.log("[TeamPage] Exact match error:",p)}catch(v){console.error("[TeamPage] Error with single() query:",v)}U=U.eq("slug",s),console.log("[TeamPage] Falling back to regular query with slug:",U)}else i&&he(i)?U=U.eq("id",i):i&&/^\d+$/.test(i)?U=U.eq("external_id",parseInt(i,10)):i&&typeof i=="string"&&(U=U.eq("abbreviation",i.toUpperCase()));let{data:D,error:M}=await U;if(M){console.error("[TeamPage] Error checking team count:",M),W(M.message),O(!1);return}if(console.log(`[TeamPage] Found ${(D==null?void 0:D.length)||0} matching teams`),s&&(!D||D.length===0)){console.log("[TeamPage] No exact slug match found, trying case-insensitive search");const{data:v,error:p}=await B.from("teams").select("*, league:league_id(*)").ilike("slug",`%${s}%`);if(p&&console.error("[TeamPage] Error with fuzzy search:",p),console.log(`[TeamPage] Found ${(v==null?void 0:v.length)||0} fuzzy matches`),v&&v.length>0)console.log("[TeamPage] Using fuzzy matches:",v),D=v;else{console.log("[TeamPage] Trying to match by team name");const{data:L,error:u}=await B.from("teams").select("*, league:league_id(*)").ilike("name",`%${s.replace(/-/g," ")}%`);u&&console.error("[TeamPage] Error with name search:",u),console.log(`[TeamPage] Found ${(L==null?void 0:L.length)||0} name matches`),L&&L.length>0&&(D=L)}}if(!D||D.length===0){console.error(`[TeamPage] Team not found with identifier: ${s||i}`),W(`Team not found: ${s||i}`),O(!1);return}D.length>1&&(console.warn("[TeamPage] Multiple teams found with the same identifier:",D.map(v=>{const p=v;return`${p.name} (${p.id}, slug: ${p.slug||"undefined"})`})),console.log("[TeamPage] Using first match:",D[0]));const j=D[0];if(!j){console.error("[TeamPage] No team data found"),W("Team not found"),O(!1);return}if(console.log("[TeamPage] Fallback team data:",j),console.log("Fetched team data:",j),o(j),j&&j.id)try{console.log("[TeamPage] Fetching chemistry data for team ID:",j.id);const v=await de(j.id);v?(console.log("[TeamPage] Setting chemistry data (MLB/Other):",v),f(v)):(console.log("[TeamPage] Using default chemistry data (MLB/Other)"),f({score:50,elements:{fire:25,earth:25,air:25,water:25,balance:50},aspects:{harmonyScore:50,challengeScore:20,netHarmony:50},calculatedAt:new Date().toISOString()}))}catch(v){console.error("[TeamPage] Error fetching chemistry data (MLB/Other):",v),f({score:50,elements:{fire:25,earth:25,air:25,water:25,balance:50},calculatedAt:new Date().toISOString()})}else console.warn("[TeamPage] Fallback team id is missing, skipping chemistry fetch."),f({score:50,elements:{fire:25,earth:25,air:25,water:25,balance:50},aspects:{harmonyScore:50,challengeScore:20,netHarmony:50},calculatedAt:new Date().toISOString()});console.log("Fetching players for team:",j.name,"abbreviation:",j.abbreviation);let F=[],Q=null;try{const{data:v,error:p}=await B.from("baseball_players").select("*"),L=v||[];if(p)console.error("Error fetching players:",p.message),Q=p;else if(!L||L.length===0)console.log("No players found in database");else{const u=j.abbreviation.toUpperCase()==="OAK",w=j.abbreviation.toUpperCase();F=L.filter(E=>{const C=E.player_current_team_abbreviation,q=E.team_abbreviation;return u?C&&(C.toUpperCase()==="OAK"||C.toUpperCase()==="ATH")||q&&(q.toUpperCase()==="OAK"||q.toUpperCase()==="ATH"):C&&C.toUpperCase()===w||q&&q.toUpperCase()===w}).sort((E,C)=>{const q=Number(E.stats_batting_hits)||0,Fe=Number(C.stats_batting_hits)||0;return q>Fe?-1:q<Fe?1:(E.last_name||"").localeCompare(C.last_name||"")}),console.log("Players found for team:",j.abbreviation,":",F.length),F.length>0&&F.slice(0,3).forEach(E=>{console.log("Player:",E.full_name,"Current Team Abbr:",E.player_current_team_abbreviation,"Team Abbr:",E.team_abbreviation)})}}catch(v){console.error("Exception while fetching players:",v),Q={message:String(v)}}if(console.log("Players found for team:",j.name,"(abbreviation:",j.abbreviation,"):",(F==null?void 0:F.length)||0),(!F||F.length===0)&&(console.warn("No players found for team after all search methods"),F=[],Q=null),console.log("Final players data count:",(F==null?void 0:F.length)||0),Q)console.error("Error fetching players from Supabase:",Q),De({title:"Error fetching players",description:Q.message,variant:"destructive"}),d([]),h([]);else if(F&&F.length>0){console.log("Processing player data:",F[0]);const v=F.map(u=>{const w=u.impact_score!==void 0&&u.impact_score!==null?u.impact_score:Qr({stats_batting_hits:u.stats_batting_hits,stats_batting_runs:u.stats_batting_runs,stats_fielding_assists:u.stats_fielding_assists}),R={id:String(u.player_id||u.id||""),player_id:String(u.player_id||""),full_name:u.player_full_name||`${u.player_first_name||""} ${u.player_last_name||""}`.trim()||`Player ID: ${u.player_id||u.id||"Unknown"}`,first_name:u.player_first_name||"",last_name:u.player_last_name||"",headshot_url:u.player_official_image_src||u.headshot_url||"/placeholder-player.png",position:u.player_primary_position||u.position||"Unknown",number:u.player_jersey_number||u.number||0,team_id:u.team_id?String(u.team_id):null,birth_date:u.player_birth_date||u.birth_date||null,is_active:u.player_current_roster_status!=="Inactive",player_current_team_abbreviation:u.player_current_team_abbreviation||u.team_abbreviation||null,...u.team_name&&{team_name:u.team_name},...u.team_abbreviation&&{team_abbreviation:u.team_abbreviation},...u.stats_batting_hits!==void 0&&{stats_batting_hits:u.stats_batting_hits},...u.stats_batting_runs!==void 0&&{stats_batting_runs:u.stats_batting_runs},...u.stats_fielding_assists!==void 0&&{stats_fielding_assists:u.stats_fielding_assists},...u.impact_score!==void 0&&{impact_score:u.impact_score},...u.astro_influence_score!==void 0&&{astro_influence:u.astro_influence_score},impact_score:w};if(u.number!==void 0&&u.number!==null){const E=typeof u.number=="string"?parseInt(u.number,10):Number(u.number);isNaN(E)||(R.number=E)}else if(u.player_jersey_number!==void 0&&u.player_jersey_number!==null){const E=typeof u.player_jersey_number=="string"?parseInt(u.player_jersey_number,10):Number(u.player_jersey_number);isNaN(E)||(R.number=E)}return R});console.log("Mapped players:",v.length);const p=v.map(async(u,w)=>{const R=F[w];if(u.impact_score!==void 0&&u.impact_score!==null&&(R.impact_score===void 0||R.impact_score===null||u.impact_score!==R.impact_score))try{const{error:E}=await B.from("baseball_players").update({impact_score:u.impact_score}).eq("id",u.id);E?console.error(`Error updating impact score for player ${u.full_name}:`,E):console.log(`Updated impact score for ${u.full_name}: ${u.impact_score}`)}catch(E){console.error(`Exception updating impact score for player ${u.full_name}:`,E)}});await Promise.all(p),d(v);const L=[...v].sort((u,w)=>{const R=E=>{if(!E)return 0;const C=E.toLowerCase();return C.includes("pitcher")||C==="p"?10:C.includes("catcher")||C==="c"?9:C.includes("shortstop")||C==="ss"?8:C.includes("first")||C==="1b"?7:C.includes("second")||C==="2b"?6:C.includes("third")||C==="3b"?5:C.includes("outfield")||C.includes("of")?4:3};return R(w.primary_position)-R(u.primary_position)});h(L.slice(0,4));try{console.log("[TeamPage] Fetching chemistry data for team ID:",j.id);const u=await de(j.id);if(u)console.log("[TeamPage] Setting chemistry data (from fetchTeamChemistry):",u),f(u);else{console.log("[TeamPage] No chemistry data from fetchTeamChemistry, trying direct query...");const{data:w,error:R}=await B.from("team_chemistry").select("*").or(`team_id.eq.${j.id}${j.external_id?`,team_id.eq.${j.external_id}`:""}`).maybeSingle();if(console.log("[TeamPage] Direct chemistry data query result:",{chemistryData:w,chemistryError:R}),w){console.log("[TeamPage] Found chemistry data in direct query, score:",w.score);let E={fire:25,earth:25,air:25,water:25,balance:50};if(w.elements)try{const q=typeof w.elements=="string"?JSON.parse(w.elements):w.elements;E={fire:q.fire||25,earth:q.earth||25,air:q.air||25,water:q.water||25,balance:q.balance||50}}catch(q){console.error("[TeamPage] Error parsing elements:",q)}const C={score:w.score||50,elements:E,calculatedAt:w.calculated_at||w.last_updated||new Date().toISOString()};console.log("[TeamPage] Setting chemistry data from direct query:",C),f(C)}else console.log("[TeamPage] No chemistry data found, using defaults"),f({score:50,elements:{fire:25,earth:25,air:25,water:25,balance:50},calculatedAt:new Date().toISOString()})}}catch(u){console.error("[TeamPage] Error fetching chemistry data:",u),f({score:50,elements:{fire:25,earth:25,air:25,water:25,balance:50},calculatedAt:new Date().toISOString()})}finally{A(!1)}}else d([]),h([]),f({score:50,elements:{fire:25,earth:25,air:25,water:25,balance:50},aspects:{harmonyScore:50,challengeScore:20,netHarmony:50},calculatedAt:new Date().toISOString()}),A(!1);const{data:re,error:ae}=await B.from("games").select(`
            id,
            game_date,
            game_time_utc,
            status,
            home_team_id,
            away_team_id,
            home_score,
            away_score,
            home_team:home_team_id(id, name, abbreviation, logo_url, city),
            away_team:away_team_id(id, name, abbreviation, logo_url, city)
          `).or(`home_team_id.eq.${i},away_team_id.eq.${i}`).gte("game_time_utc",new Date().toISOString()).order("game_time_utc",{ascending:!0}).limit(6);if(ae)console.error("Error fetching games:",ae),De({title:"Error loading games",description:ae.message,variant:"destructive"});else if(re){console.log("Fetched upcoming games:",re);const v=re.filter(p=>typeof p=="object"&&p!==null&&"id"in p&&!("error"in p)).map(p=>{const L=p.home_team&&typeof p.home_team=="object"&&!("error"in p.home_team)?{id:String(p.home_team.id||""),name:String(p.home_team.name||"Unknown Team"),abbreviation:String(p.home_team.abbreviation||"TBD"),city:String(p.home_team.city||"Unknown"),logo_url:p.home_team.logo_url,primary_color:p.home_team.primary_color||"#000000",secondary_color:p.home_team.secondary_color||"#FFFFFF",league_id:String(p.home_team.league_id||p.league_id||"unknown"),external_id:String(p.home_team.external_id||p.home_team.id||"")}:null,u=p.away_team&&typeof p.away_team=="object"&&!("error"in p.away_team)?{id:String(p.away_team.id||""),name:String(p.away_team.name||"Unknown Team"),abbreviation:String(p.away_team.abbreviation||"TBD"),city:String(p.away_team.city||"Unknown"),logo_url:p.away_team.logo_url,primary_color:p.away_team.primary_color||"#000000",secondary_color:p.away_team.secondary_color||"#FFFFFF",league_id:String(p.away_team.league_id||p.league_id||"unknown"),external_id:String(p.away_team.external_id||p.away_team.id||"")}:null;return{id:String(p.id||""),game_date:String(p.game_date||""),game_time_utc:String(p.game_time_utc||""),status:String(p.status||"Scheduled"),home_team_id:String(p.home_team_id||""),away_team_id:String(p.away_team_id||""),home_score:typeof p.home_score=="number"?p.home_score:null,away_score:typeof p.away_score=="number"?p.away_score:null,home_team:L,away_team:u,league_id:p.league_id?String(p.league_id):"unknown",venue_id:p.venue_id?String(p.venue_id):"unknown",...Object.fromEntries(Object.entries(p).filter(([R])=>!["id","game_date","game_time_utc","status","home_team_id","away_team_id","home_score","away_score","home_team","away_team","league_id","venue_id"].includes(R)).map(([R,E])=>[R,E]))}});y(v)}}catch(V){console.error("Error in team page:",V),W(V.message||"An unexpected error occurred")}finally{O(!1)}})()},[i]);const ht=async _=>{try{const{data:G,error:V}=await B.from("games").select("*").or(`home_team_id.eq.${_},away_team_id.eq.${_}`).gte("game_date",new Date().toISOString()).order("game_date",{ascending:!0}).limit(5);if(V)throw V;if(!G||G.length===0)return;const H=new Set;G.forEach(M=>{M.home_team_id&&H.add(M.home_team_id),M.away_team_id&&H.add(M.away_team_id)});const{data:T,error:ee}=await B.from("teams").select("*").in("id",Array.from(H));if(ee)throw ee;const U=new Map((T==null?void 0:T.map(M=>[M.id,M]))||[]),D=G.map(M=>{var Q,re,ae,v;const j=U.get(M.home_team_id)||null,F=U.get(M.away_team_id)||null;return{...M,id:M.id.toString(),home_team_id:((Q=M.home_team_id)==null?void 0:Q.toString())||"",away_team_id:((re=M.away_team_id)==null?void 0:re.toString())||"",league_id:((ae=M.league_id)==null?void 0:ae.toString())||"",venue_id:((v=M.venue_id)==null?void 0:v.toString())||"",home_team:j,away_team:F,venue:M.venue_id?{id:M.venue_id.toString(),name:null,city:null}:null}});y(D)}catch(G){console.error("Error fetching upcoming games:",G)}},gt=()=>{if(!l)return null;try{const _=(l.abbreviation||l.id||"").toLowerCase(),G=`${window.location.origin}/teams/${_}`,V=l.astro_score||0,H=l.name||"Team",T=`${H} | Astro Score: ${V}/100 | Full Moon Odds`,ee=`Discover ${H}'s Astro Score: ${V}/100 and see how the stars align for their performance!`;let U="";l.logo_url?U=l.logo_url.startsWith("http")?l.logo_url:`${window.location.origin}${l.logo_url}`:U=`${window.location.origin}/team-logos/${_}.png`;const D=U.startsWith("http")?U:`${window.location.origin}${U}`;return m(Oe,{children:[r("title",{children:T}),r("meta",{name:"description",content:ee}),r("meta",{property:"og:type",content:"website"}),r("meta",{property:"og:site_name",content:"Full Moon Odds"}),r("meta",{property:"og:url",content:G}),r("meta",{property:"og:title",content:T}),r("meta",{property:"og:description",content:ee}),r("meta",{property:"og:image",content:D}),r("meta",{property:"og:image:width",content:"1200"}),r("meta",{property:"og:image:height",content:"630"}),r("meta",{property:"og:image:alt",content:`${H} Astro Score: ${V}/100`}),r("meta",{name:"twitter:card",content:"summary_large_image"}),r("meta",{name:"twitter:site",content:"@fullmoonodds"}),r("meta",{name:"twitter:creator",content:"@fullmoonodds"}),r("meta",{name:"twitter:url",content:G}),r("meta",{name:"twitter:title",content:T}),r("meta",{name:"twitter:description",content:ee}),r("meta",{name:"twitter:image",content:D}),r("meta",{name:"twitter:image:alt",content:`${H} logo with Astro Score: ${V}/100`})]})}catch(_){return console.error("Error generating meta tags:",_),null}};if(N)return r("div",{className:"min-h-screen bg-slate-50 p-4 sm:p-8",children:m("div",{className:"container mx-auto",children:[m("div",{className:"flex items-center mb-8",children:[r("div",{className:"h-16 w-16 rounded-full bg-gray-200 mr-4"}),m("div",{className:"space-y-2",children:[r("div",{className:"h-8 w-48 bg-gray-200 rounded"}),r("div",{className:"h-4 w-64 bg-gray-200 rounded"})]})]}),m("div",{className:"mb-12",children:[r("div",{className:"h-8 w-48 bg-gray-200 rounded mb-6"}),r("div",{className:"grid gap-4 grid-cols-2 sm:grid-cols-3 md:grid-cols-6",children:[1,2,3,4,5,6].map(_=>r("div",{className:"h-40 w-full bg-gray-200 rounded-lg"},_))})]}),m("div",{className:"mb-12",children:[r("div",{className:"h-8 w-48 bg-gray-200 rounded mb-6"}),r("div",{className:"h-64 w-full bg-gray-200 rounded-lg"})]}),m("div",{className:"mb-12",children:[r("div",{className:"h-8 w-48 bg-gray-200 rounded mb-6"}),r("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(_=>r("div",{className:"h-40 w-full bg-gray-200 rounded-lg"},_))})]})]})});if(J)return r("div",{className:"min-h-screen bg-slate-50 p-4 sm:p-8",children:r("div",{className:"container mx-auto",children:r("div",{className:"max-w-2xl mx-auto",children:r(kt,{variant:"destructive",children:r($t,{children:J})})})})});const Z=Br(l),be=l?{id:l.id,name:l.name,logo:l.logo_url||"",astro_score:(b==null?void 0:b.score)||0,leagueSlug:((Le=l.league)==null?void 0:Le.sport)||"mlb",teamSlug:l.slug||l.id}:null;return console.log("Team Share Data:",{...be,chemistryScore:b==null?void 0:b.score}),m("div",{className:"min-h-screen bg-slate-50 text-slate-800 p-4 sm:p-8",style:{"--primary-color":Z.primary,"--secondary-color":Z.secondary,"--text-color":Z.text},children:[gt(),m("div",{className:"container pb-12 pt-0 px-4 md:px-6 mx-auto",children:[m(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8 md:mb-12 flex flex-col md:flex-row items-center md:items-start gap-4 md:gap-8 mt-1.5",children:[r("div",{className:"flex-shrink-0 w-32 h-32 md:w-42 md:h-42",children:l!=null&&l.logo_url?r("img",{src:l.logo_url,alt:`${l.name} logo`,className:"w-full h-full object-contain",loading:"lazy"}):r("div",{className:"w-full h-full flex items-center justify-center bg-gray-200 rounded-full",children:r("span",{className:"text-gray-600 font-bold text-2xl",children:(l==null?void 0:l.abbreviation)||"?"})})}),r("div",{className:"text-center md:text-left flex-1",children:m("div",{className:"flex flex-row items-start justify-center md:justify-start space-x-3 mb-3.5",children:[m("div",{children:[r("h1",{className:"text-2xl md:text-3xl font-bold",children:l==null?void 0:l.name}),m("p",{className:"text-slate-500 text-sm",children:[l==null?void 0:l.city," • ",(l==null?void 0:l.venue)||"Venue N/A"]})]}),((Re=l==null?void 0:l.league)==null?void 0:Re.name)&&r(me,{variant:"outline",className:"text-[10px] sm:text-xs px-2 py-0.5 sm:py-1 mt-2",style:{borderColor:Z.secondary,color:Z.primary},children:l.league.name})]})})]}),r("div",{className:"fixed top-40 right-8 z-50",children:r("div",{className:"backdrop-blur-lg bg-white/80 dark:bg-gray-900/80 rounded-lg p-2 shadow-lg shadow-blue-500/50 hover:shadow-xl hover:shadow-blue-500/70 transition-shadow",children:r(Be,{team:be})})}),m(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"-mt-1.5 mb-8 md:mb-12",children:[m("h2",{className:"text-xl md:text-2xl font-bold mb-4 md:mb-6 flex items-center",children:[r(Ke,{className:"mr-2 h-5 w-5 md:h-6 md:w-6",style:{color:Z.primary}}),"Top Players"]}),r("div",{className:"flex overflow-x-auto pb-4 -mx-4 px-4 space-x-4 md:space-x-0 md:mx-0 md:px-0 md:grid md:gap-4 md:grid-cols-2 lg:grid-cols-4 md:justify-items-center md:overflow-visible",children:g.length>0?g.slice(0,4).map(_=>{var V;const G=c.length>0?c.reduce((H,T)=>H+(T.astro_influence||0),0)/c.length:0;return r(jt,{id:_.id,player_id:_.player_id,full_name:_.full_name,headshot_url:_.headshot_url||void 0,birth_date:_.birth_date||void 0,primary_number:((V=_.number)==null?void 0:V.toString())||void 0,primary_position:_.position||void 0,impact_score:_.impact_score||0,astro_influence:_.astro_influence||0,teamAverageAstroInfluence:G,linkPath:(l==null?void 0:l.league_id)==="nba"?`/nba/players/${_.id}`:`/teams/${i}/players/${_.id}`},_.id)}):r("p",{className:"col-span-full text-slate-500 text-center py-10",children:"No player data available"})})]}),m(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"mb-8 md:mb-12",children:[m("h2",{className:"text-xl md:text-2xl font-bold mb-4 md:mb-6 flex items-center",children:[r(ue,{className:"mr-2 h-5 w-5 md:h-6 md:w-6",style:{color:Z.primary}}),"Team Insights"]}),r($e,{className:"bg-white w-full",children:r(ke,{className:"p-0",children:r("div",{className:"w-full border rounded-lg overflow-hidden",children:b?m("div",{className:"p-4 bg-white",children:[m("h3",{className:"font-semibold text-lg mb-4 text-slate-800 flex items-center",children:[r(Ne,{className:"h-5 w-5 mr-2 text-amber-500"}),"Team Chemistry"]}),r("div",{className:"border rounded-lg p-4 bg-slate-50",children:r(Zr,{chemistry:b,className:"w-full"})}),m("p",{className:"text-xs text-slate-500 mt-2 text-right",children:["Last updated: ",new Date(b.calculatedAt).toLocaleString()]})]}):S?m("div",{className:"p-6 md:p-8 rounded-lg bg-slate-50 animate-pulse w-full",children:[r("h3",{className:"font-semibold mb-4 text-slate-700 text-lg",children:"Team Chemistry"}),r("div",{className:"w-full h-48 md:h-64 bg-slate-200 rounded-md"})]}):m("div",{className:"p-6 md:p-8 rounded-lg bg-slate-50 border border-dashed border-slate-300 w-full",children:[m("h3",{className:"font-semibold mb-4 text-slate-700 flex items-center text-lg",children:[r(Ne,{className:"h-5 w-5 mr-2 text-amber-500"}),"Team Chemistry"]}),r("p",{className:"text-slate-600 text-base mb-4",children:"No chemistry data is available for this team. The data needs to be generated first."}),m("div",{className:"bg-amber-50 p-4 rounded-md border border-amber-200",children:[m("h4",{className:"text-base font-medium text-amber-800 flex items-center mb-2",children:[r(Ut,{className:"h-4 w-4 mr-2"}),"Admin Action Required"]}),m("ol",{className:"text-sm text-amber-700 list-decimal pl-5 space-y-1",children:[m("li",{children:["For NBA teams, run ",r("code",{className:"bg-amber-100 px-1.5 py-0.5 rounded",children:"node scripts/calculate_nba_team_chemistry_v2.js"})]}),m("li",{children:["For other teams, ensure the ",r("code",{className:"bg-amber-100 px-1.5 py-0.5 rounded",children:"team_chemistry"})," table exists"]}),r("li",{children:"Refresh this page to see the team chemistry meter"})]})]})]})})})})]}),m(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"mb-8 md:mb-12 mt-8",children:[m("h2",{className:"text-xl md:text-2xl font-bold mb-4 md:mb-6 flex items-center",children:[r(tt,{className:"mr-2 h-5 w-5 md:h-6 md:w-6",style:{color:Z.primary}}),"Upcoming Games"]}),$.length>0?r(qr,{games:$.filter(_=>!!_.home_team&&!!_.away_team).map(_=>({..._,home_team:_.home_team,away_team:_.away_team,astroInfluence:_.astroInfluence||["Favorable Moon","Rising Mars","Jupiter Aligned"][Math.floor(Math.random()*3)],astroEdge:_.astroEdge||Math.random()*15+5})),defaultLogo:"/placeholder-team.png",className:"mt-6 -ml-5"}):r("p",{className:"text-center py-8 text-slate-500",children:"No upcoming games scheduled"})]}),m(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"mb-4 md:mb-6",children:[m("h2",{className:"text-xl md:text-2xl font-bold mb-4 md:mb-6 flex items-center",children:[r(Ht,{className:"mr-2 h-5 w-5 md:h-6 md:w-6",style:{color:Z.primary}}),"Team Roster"]}),r("div",{className:"overflow-x-auto -mx-4 px-4 md:mx-0 md:px-0",children:r(Ur,{players:c.map(_=>({id:_.id,player_id:_.player_id,full_name:_.full_name,first_name:_.first_name,last_name:_.last_name,position:_.position,number:_.number,headshot_url:_.headshot_url,is_active:_.is_active,team_id:_.team_id,team_name:_.team_name,stats_batting_hits:_.stats_batting_hits,stats_batting_runs:_.stats_batting_runs,stats_fielding_assists:_.stats_fielding_assists,impact_score:_.impact_score})),teamId:i||""})})]})]}),r("div",{className:"flex items-center space-x-4",children:r(Be,{team:be,className:"ml-auto"})})]})};export{ba as default};
//# sourceMappingURL=TeamPage-Dm4Opdi5.js.map
