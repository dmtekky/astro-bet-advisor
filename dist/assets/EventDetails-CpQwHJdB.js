import{c as le,s as k,e as Fe,u as He,r as P,b as e,j as t,B as Pe,Z as Ne,F as ve,C as Ie,R as Re,_ as je}from"./main-BDfILoKw.js";import{d as J,C as de,c as Q,a as Te}from"./card-CC9ncavt.js";import{A as Be}from"./arrow-left-DymGi_O1.js";import{C as Ue}from"./clock-CZyqThTk.js";import{C as ze}from"./calendar-DtJsCdzD.js";import{U as Ye}from"./users-C6uxgrdu.js";import{T as Oe}from"./triangle-alert-rXsWM4zW.js";import{C as Ae}from"./circle-alert-DkcW6Zbl.js";import{I as Ge}from"./info-Mrz3RB_M.js";import{L as qe}from"./loader-circle-CEs1fPnE.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=le("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=le("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=le("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=le("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Ce=(n,o)=>{var N,b;const m=n.home_team||((N=o.get(n.home_team_id))==null?void 0:N.name)||"Home Team",l=n.away_team||((b=o.get(n.away_team_id))==null?void 0:b.name)||"Away Team",i=n.start_time||n.game_time||new Date().toISOString();return{id:typeof n.id=="number"?n.id:parseInt(n.id)||0,external_id:n.external_id||`game-${n.id}`,home_team:m,away_team:l,home_team_id:n.home_team_id,away_team_id:n.away_team_id,game_time:i,commence_time:i,start_time:i,status:n.status||"scheduled",score_home:n.score_home,score_away:n.score_away,last_updated:n.updated_at,created_at:n.created_at,odds:n.odds||null}},We=async n=>{var o,m,l,i,N,b,u,_,M;if(!n)return console.error("No ID provided to fetchScheduleById"),null;try{console.log("Fetching game with ID:",n);const g=n.toString();let c=null,x=null;if(g.length>10||g.includes("-")){console.log("Attempting lookup by external_id...");const{data:f,error:p}=await k.from("schedules").select("*").eq("external_id",g).maybeSingle();if(c=f,x=p,!c){console.log("external_id not found, attempting lookup by id as string...");const{data:T,error:w}=await k.from("schedules").select("*").eq("id",g).maybeSingle();T&&(c=T,x=w)}}else{console.log("Attempting lookup by numeric id...");const{data:f,error:p}=await k.from("schedules").select("*").eq("id",g).maybeSingle();c=f,x=p}if(x&&console.error("Error in schedule lookup:",x),c){console.log("Found match for event:",c.id),console.log("=== Metadata Analysis ==="),console.log("Raw metadata:",JSON.stringify(c.metadata,null,2)),c.metadata&&(console.log("=== Location Data Analysis ==="),console.log("Venue:",c.venue),console.log("Location in metadata:",(o=c.metadata)==null?void 0:o.location),console.log("City:",(l=(m=c.metadata)==null?void 0:m.location)==null?void 0:l.city),console.log("State:",(N=(i=c.metadata)==null?void 0:i.location)==null?void 0:N.state),console.log("Country:",(u=(b=c.metadata)==null?void 0:b.location)==null?void 0:u.country),console.log("Timezone:",(M=(_=c.metadata)==null?void 0:_.location)==null?void 0:M.timezone)),c.external_id==="93dfb7992d1dacd6870906bffb91afc2"||c.id==="93dfb7992d1dacd6870906bffb91afc2"?(c.home_team="Oklahoma City Thunder",c.away_team="Minnesota Timberwolves"):c.external_id==="d8df18d13a93eeaa5c8242289a517c4b"||c.id==="d8df18d13a93eeaa5c8242289a517c4b"?(c.home_team="New York Knicks",c.away_team="Indiana Pacers"):c.home_team==="Home Team"&&c.away_team==="Away Team"&&(c.sport_type==="basketball_nba"?(c.home_team=c.home_team_id||"NBA Home Team",c.away_team=c.away_team_id||"NBA Away Team"):c.sport_type==="baseball_mlb"?(c.home_team=c.home_team_id||"MLB Home Team",c.away_team=c.away_team_id||"MLB Away Team"):c.sport_type==="football_nfl"?(c.home_team=c.home_team_id||"NFL Home Team",c.away_team=c.away_team_id||"NFL Away Team"):c.sport_type==="hockey_nhl"&&(c.home_team=c.home_team_id||"NHL Home Team",c.away_team=c.away_team_id||"NHL Away Team"));const{data:f,error:p}=await k.from("teams").select("*").eq("sport",c.sport);p&&console.error("Error fetching teams for match:",p);const T=new Map;return f&&f.forEach(w=>{T.set(w.id,w)}),Ce(c,T)}console.log("Direct ID lookup failed, trying alternative methods...");const{data:L,error:B}=await k.from("schedules").select("*").limit(100);if(B?console.error("Error fetching all games:",B):L&&L.length>0&&(console.log(`Fetched ${L.length} games for alternative lookup`),console.log("Sample games in database:",L.slice(0,3).map(f=>({id:f.id,sport:f.sport,start_time:f.start_time,home_team_id:f.home_team_id,away_team_id:f.away_team_id})))),g.includes("_")){console.log("Trying to parse composite ID:",g);const f=g.split("_"),p=f[0];let T=null;if(!T)try{const{data:w,error:I}=await k.from("schedules").select("*").eq("sport",p.toUpperCase()).limit(10);if(I)console.error("Error searching by sport in schedules table:",I);else if(w&&w.length>0){if(console.log(`Found ${w.length} schedules matching sport ${p.toUpperCase()}`),f.length>3&&!isNaN(Number(f[f.length-1]))){const U=Number(f[f.length-1]),ne=new Date(U);console.log("Looking for games around date:",ne.toISOString());let V=null,K=1/0;for(const F of w){if(!F.start_time)continue;const he=new Date(F.start_time),oe=Math.abs(he.getTime()-ne.getTime());oe<K&&(K=oe,V=F)}V&&K<24*60*60*1e3&&(console.log("Found closest game by date:",V.id,"time difference (ms):",K),T=V)}!T&&w.length>0&&(console.log("Using first schedule matching sport as fallback"),T=w[0])}}catch(w){console.error("Error in sport search from schedules table:",w)}if(T){const{data:w}=await k.from("teams").select("*").eq("sport",T.sport),I=new Map;return w&&w.forEach(U=>{I.set(U.id,U)}),Ce(T,I)}}return console.error("Game not found for ID:",n),null}catch(g){return console.error("Error in fetchScheduleById:",g),null}},ke=async n=>{try{console.log(`[PLAYER FETCH] Fetching players for team ID: ${n}`);const{data:o,error:m}=await k.from("teams").select("external_id, name, abbreviation").eq("id",n).single();if(m||!o)return console.error("[PLAYER FETCH] Error fetching team:",(m==null?void 0:m.message)||"Team not found"),[];const l=o.external_id;console.log(`[PLAYER FETCH] Found team: ${o.name} (${o.abbreviation}), external_id: ${l}`);let i=[],N=null;const{data:b,error:u}=await k.from("players").select("*").eq("idteam",String(l));if(console.log(`[PLAYER FETCH] Found ${(b==null?void 0:b.length)||0} players with idteam as string`),b&&b.length>0)return b;const{data:_,error:M}=await k.from("players").select("*").eq("idteam",Number(l));if(console.log(`[PLAYER FETCH] Found ${(_==null?void 0:_.length)||0} players with idteam as number`),_&&_.length>0)return _;const{data:g,error:c}=await k.from("players").select("*").eq("current_team_id",n);return console.log(`[PLAYER FETCH] Found ${(g==null?void 0:g.length)||0} players with current_team_id`),g&&g.length>0?g:(console.error("[PLAYER FETCH] No players found for this team using any method"),[])}catch(o){return console.error("[PLAYER FETCH] Error in fetchPlayersByTeam:",o),[]}};function q(n){return n?n.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\b(?:basketball|football|baseball|hockey|team|club|fc|united|city|state|athletic|athletics|sports)\b/gi,"").replace(/\s+/g," ").trim():""}function Xe(n,o){if(n.length===0)return o.length;if(o.length===0)return n.length;const m=Array(o.length+1).fill(null).map(()=>Array(n.length+1).fill(null));for(let l=0;l<=n.length;l++)m[0][l]=l;for(let l=0;l<=o.length;l++)m[l][0]=l;for(let l=1;l<=o.length;l++)for(let i=1;i<=n.length;i++){const N=n[i-1]===o[l-1]?0:1;m[l][i]=Math.min(m[l][i-1]+1,m[l-1][i]+1,m[l-1][i-1]+N)}return m[o.length][n.length]}function Je(n,o){const m=n.length,l=o.length;if(m===0)return l===0?1:0;if(l===0)return 0;const i=Xe(n,o),N=Math.max(m,l);return 1-i/N}function Me(n,o){if(!n||!(o!=null&&o.length))return null;const m={dodgers:["la","losangeles","ladodgers"],yankees:["ny","newyork","nyy"],redsox:["boston","bos","redsox"],cubs:["chicago","chc"],whitesox:["chicago","chw","whitesox"],mets:["nym","newyork"],phillies:["phi","philadelphia"],nationals:["was","wsh","washington"],marlins:["mia","miami","fla","florida"],braves:["atl","atlanta"],cardinals:["stl","stlouis"],brewers:["mil","milwaukee"],reds:["cin","cincinnati"],pirates:["pit","pittsburgh"],giants:["sf","sanfrancisco","sfg"],padres:["sd","sandiego"],diamondbacks:["ari","arizona","dbacks"],rockies:["col","colorado"],astros:["hou","houston","astros"],rangers:["tex","texas"],athletics:["oak","oakland","as"],angels:["laa","losangeles","anaheim"],mariners:["sea","seattle"],bluejays:["tor","toronto"],orioles:["bal","baltimore"],rays:["tb","tampabay"],royals:["kc","kansascity"],tigers:["det","detroit"],twins:["min","minnesota"],guardians:["cle","cleveland"],indians:["cle","cleveland"]},l=q(n);console.log(`[TEAM MATCH] Searching for team: '${n}' (normalized: '${l}')`);let i=o.find(u=>u.name&&q(u.name)===l);if(i)return console.log(`[TEAM MATCH] Found exact match: '${i.name}'`),i;const N=o.find(u=>{if(u.display_name&&q(u.display_name)===l||u.abbreviation&&q(u.abbreviation)===l)return!0;const _=Object.keys(m).find(M=>m[M].includes(l));return!!(_&&u.name&&q(u.name).includes(_))});if(N)return console.log(`[TEAM MATCH] Found alternate field match: '${N.name}'`),N;const b=o.map(u=>{if(!u.name)return{team:u,score:0};const _=q(u.name);let M=Je(l,_);const g=u.abbreviation?q(u.abbreviation):"",c=g&&(l===g||l.includes(g)||g.includes(l)),x=Object.entries(m).some(([B,f])=>_.includes(B)?f.some(p=>l===p):!1);let L=M;return c&&(L=Math.max(M,.8)),x&&(L=Math.max(M,.9)),{team:u,score:L}}).filter(u=>u.score>.5);if(b.length>0){b.sort((_,M)=>M.score-_.score);const u=b[0];return console.log(`[TEAM MATCH] Found fuzzy match: '${u.team.name}' (score: ${u.score.toFixed(2)})`),u.team}return console.log(`[TEAM MATCH] No match found for '${n}'`),null}async function Qe(){try{const{generatePlayerAstroData:n}=await je(async()=>{const{generatePlayerAstroData:l}=await import("./playerAstroService-B0tkTbkN.js");return{generatePlayerAstroData:l}},[]),o=new Date().toISOString().split("T")[0],m=await n(o);return{moon_phase:m.moon.phase,moon_sign:m.moon.sign,mercury_sign:m.planets.mercury.sign,venus_sign:m.planets.venus.sign,mars_sign:m.planets.mars.sign,jupiter_sign:m.planets.jupiter.sign,saturn_sign:m.planets.saturn.sign,uranus_sign:m.planets.uranus.sign,neptune_sign:m.planets.neptune.sign,pluto_sign:m.planets.pluto.sign,sun_moon_aspect:m.aspects.sun_moon,sun_mars_aspect:m.aspects.sun_mars,sun_jupiter_aspect:m.aspects.sun_jupiter,sun_saturn_aspect:m.aspects.sun_saturn,moon_venus_aspect:m.aspects.moon_venus,moon_mars_aspect:m.aspects.moon_mars}}catch(n){return console.error("Error generating astrological data:",n),{moon_phase:.5,moon_sign:"Aries",mercury_sign:"Taurus",venus_sign:"Gemini",mars_sign:"Cancer",jupiter_sign:"Leo",saturn_sign:"Virgo",uranus_sign:"Libra",neptune_sign:"Scorpio",pluto_sign:"Sagittarius",sun_moon_aspect:"conjunction",sun_mars_aspect:"sextile",sun_jupiter_aspect:"trine",sun_saturn_aspect:"square",moon_venus_aspect:"sextile",moon_mars_aspect:"trine"}}}function Se(n){return n.map(o=>{const m=typeof o.win_shares=="number"?o.win_shares:5,l=typeof o.id=="number"?String(o.id):o.id||"",i=typeof o.name=="string"?o.name:"Unknown Player";return{...{id:l,name:i,birth_date:typeof o.birth_date=="string"?o.birth_date:"",sport:typeof o.sport=="string"?o.sport:"",win_shares:m,stats:{},position:typeof o.position=="string"?o.position:"Player"},team:typeof o.team_id=="string"?o.team_id:"",team_id:typeof o.team_id=="string"?o.team_id:void 0,astro_influence:Math.round(Math.max(10,Math.min(100,m*10+Math.random()*10))),position:typeof o.position=="string"&&o.position?o.position:"Player"}})}const dt=()=>{const{id:n}=Fe(),o=He(),[m,l]=P.useState(!0),[i,N]=P.useState(null),[b,u]=P.useState([]),[_,M]=P.useState([]),[g,c]=P.useState([]),[x,L]=P.useState(0),[B,f]=P.useState(null),[p,T]=P.useState(null),w=s=>{if(!s)return{date:"TBD",time:"TBD"};const h=s.start_time||s.game_time;if(!h)return console.warn("No game time found in schedule"),{date:"TBD",time:"TBD"};try{const r=new Date(h);if(isNaN(r.getTime()))return console.error("Invalid date:",h),{date:"TBD",time:"TBD"};const A={date:r.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),time:r.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",timeZoneName:"short"})};return console.log("Formatted game time:",{raw:h,date:A.date,time:A.time,timestamp:r.getTime()}),A}catch(r){return console.error("Error formatting game time:",r),{date:"TBD",time:"TBD"}}},{date:I,time:U}=w(i),ne=typeof I=="string"?I:"TBD",V=typeof U=="string"?U:"TBD",K=s=>typeof s=="string"&&s.trim()!==""?s:"Venue TBD";if(P.useEffect(()=>{(async()=>{var h;l(!0),f(null);try{if(!n){f("No event ID provided. Please return to the dashboard and try again."),l(!1);return}const r=await We(n);if(!r){f("Game not found."),l(!1);return}const A={id:r.id,home_team:r.home_team,away_team:r.away_team,home_team_id:r.home_team_id,away_team_id:r.away_team_id,game_time:r.game_time,start_time:r.start_time,status:r.status,sport:r.sport||"unknown",venue:r.venue,...r};N(A);let E=[],v=[];try{let a=function(y){return(y||"").toLowerCase().replace(/[^a-z0-9]/g,"").trim()};const d=a(r.home_team),G=a(r.away_team);console.log(`[TEAM MATCH DEBUG] Raw API home_team: '${r.home_team}', normalized: [${d}]`),console.log(`[TEAM MATCH DEBUG] Raw API away_team: '${r.away_team}', normalized: [${G}]`);const ae=((h=r.sport)==null?void 0:h.toUpperCase())||"BASKETBALL";console.log(`[TEAM MATCH] Fetching teams for sport: ${ae}`);const{data:$,error:j}=await k.from("teams").select("*").eq("sport",ae),{data:ie,error:H}=await k.from("teams").select("*"),Z=$!=null&&$.length?$:ie||[];(j||H)&&console.error("Error fetching teams:",j||H),console.log(`[TEAM MATCH] Found ${Z.length} teams in database`),Z.length>0&&console.log("[TEAM MATCH] Sample teams in database:",Z.slice(0,5).map(y=>({id:y.id,name:y.name,display_name:y.display_name,abbreviation:y.abbreviation,normalized:a(y.name)}))),console.log(`[TEAM MATCH] Looking for home team: '${r.home_team}'`);const S=Me(r.home_team,Z);console.log(`[TEAM MATCH] Looking for away team: '${r.away_team}'`);const D=Me(r.away_team,Z);console.log("[TEAM MATCH] Matching result:",{homeTeam:S?{id:S.id,name:S.name}:"Not found",awayTeam:D?{id:D.id,name:D.name}:"Not found"});const W=(S==null?void 0:S.id)||r.home_team_id,X=(D==null?void 0:D.id)||r.away_team_id;console.log("Using team IDs for player fetch:",{homeTeamId:W,awayTeamId:X});try{if(console.log("[PLAYER FETCH] Attempting to fetch players by team IDs..."),[E,v]=await Promise.all([W?ke(W).catch(y=>(console.error(`Error fetching home players for team ${W}:`,y),[])):Promise.resolve([]),X?ke(X).catch(y=>(console.error(`Error fetching away players for team ${X}:`,y),[])):Promise.resolve([])]),console.log(`[PLAYER FETCH] Initial fetch - Home: ${E.length}, Away: ${v.length}`),E.length===0||v.length===0){console.log("[PLAYER FETCH] Some teams have no players, trying alternative fetch methods...");try{const{data:y,error:be}=await k.from("players").select("*");if(be)throw be;console.log(`[PLAYER FETCH] Fetched ${y.length} total players for fallback matching`);const xe=(ce,me)=>{if(!(y!=null&&y.length))return[];if(ce){const re=y.filter(se=>se.team_id===ce);if(re.length>0)return console.log(`[PLAYER FETCH] Found ${re.length} players by team ID ${ce}`),re}if(me){const re=a(me),se=y.filter(we=>we.team&&a(we.team)===re);if(se.length>0)return console.log(`[PLAYER FETCH] Found ${se.length} players by team name '${me}'`),se}return[]};E.length===0&&(W||r.home_team)&&(console.log(`[PLAYER FETCH] Attempting fallback fetch for home team: ${(S==null?void 0:S.name)||r.home_team}`),E=xe(W,(S==null?void 0:S.name)||r.home_team)),v.length===0&&(X||r.away_team)&&(console.log(`[PLAYER FETCH] Attempting fallback fetch for away team: ${(D==null?void 0:D.name)||r.away_team}`),v=xe(X,(D==null?void 0:D.name)||r.away_team)),console.log(`[PLAYER FETCH] After fallback - Home: ${E.length}, Away: ${v.length}`)}catch(y){console.error("[PLAYER FETCH] Error in fallback player fetch:",y)}}E.length===0&&v.length===0?console.warn("[PLAYER FETCH] No players found for either team after all fallback attempts"):console.log(`[PLAYER FETCH] Final player counts - Home: ${E.length}, Away: ${v.length}`)}catch(y){console.error("[PLAYER FETCH] Error in player fetching process:",y),E=[],v=[]}}catch(a){console.error("Error fetching teams or players:",a)}const z=Se(E),Y=Se(v);console.log("[FINAL DEBUG] homePlayers:",z),console.log("[FINAL DEBUG] awayPlayers:",Y),u(z),M(Y);const _e=[...z,...Y];let O=null;try{const a=await Qe();a&&(O={moon_phase:typeof a.moon_phase=="string"?parseFloat(a.moon_phase):a.moon_phase,moon_sign:a.moon_sign||"unknown",sun_sign:a.sun_sign||"",mercury_sign:a.mercury_sign||"unknown",venus_sign:a.venus_sign||"unknown",mars_sign:a.mars_sign||"unknown",jupiter_sign:a.jupiter_sign||"unknown",saturn_sign:a.saturn_sign||"",mercury_retrograde:a.mercury_retrograde||!1,sun_mars_transit:a.sun_mars_transit||null,sun_saturn_transit:a.sun_saturn_transit||null,sun_jupiter_transit:a.sun_jupiter_transit||null})}catch(a){console.error("Error fetching astrological data:",a)}O||(O={moon_phase:.5,moon_sign:"Aries",mercury_sign:"Taurus",venus_sign:"Gemini",mars_sign:"Cancer",jupiter_sign:"Leo",saturn_sign:"",sun_sign:"",mercury_retrograde:!1,sun_mars_transit:"conjunction",sun_saturn_transit:"trine",sun_jupiter_transit:"sextile"});const $e=(a,d)=>a===3&&d>=21||a===4&&d<=19?"Aries":a===4&&d>=20||a===5&&d<=20?"Taurus":a===5&&d>=21||a===6&&d<=20?"Gemini":a===6&&d>=21||a===7&&d<=22?"Cancer":a===7&&d>=23||a===8&&d<=22?"Leo":a===8&&d>=23||a===9&&d<=22?"Virgo":a===9&&d>=23||a===10&&d<=22?"Libra":a===10&&d>=23||a===11&&d<=21?"Scorpio":a===11&&d>=22||a===12&&d<=21?"Sagittarius":a===12&&d>=22||a===1&&d<=19?"Capricorn":a===1&&d>=20||a===2&&d<=18?"Aquarius":a===2&&d>=19||a===3&&d<=20?"Pisces":"Unknown";console.log("Calculating astro influence for players:",_e.length);const R=[],Le=!0;for(const a of _e){let d=0;if(Le)try{const $=a.birth_date?new Date(a.birth_date):null;if($&&!isNaN($.getTime())){const j=$.getMonth()+1,ie=$.getDate();let H=(j*7+ie*3)%30+40;O.mercury_retrograde&&(j===3||j===7||j===11?H+=10:H-=5),O.moon_phase>.8?H+=8:O.moon_phase<.2&&(H-=5),$e(j,ie)===O.sun_sign&&(H+=15),d=Math.max(30,Math.min(95,H))}else d=50;console.log(`Calculated real impact for ${a.name}: ${d}%`)}catch($){console.error(`Error calculating astro influence for player ${a.id}:`,$),d=a.id.charCodeAt(0)%30+40}const G=typeof a.win_shares=="number"?a.win_shares:0,ae=d+G;R.push({...a,astro_influence:d,total_impact:ae}),console.log(`Player ${a.name} - Astro: ${d}, Stats: ${G}, Total: ${ae}`)}let te=0;if(R.length>0){const a=R.reduce((d,G)=>d+(G.astro_influence??0),0);te=Math.round(a/R.length),console.log(`OAS calculated: ${te}% from ${R.length} players`)}else{const a=new Date(r.game_time||r.start_time||new Date().toISOString()),d=a.getDate();te=((a.getMonth()+1)*5+d*2)%25+50,console.log(`Using deterministic OAS based on game date: ${te}%`)}L(te);let C=null;R.length>0&&(C=R.reduce((a,d)=>d.total_impact>((a==null?void 0:a.total_impact)??0)?d:a,R[0]),console.log("Top player by impact:",C==null?void 0:C.name,"with score:",C==null?void 0:C.total_impact)),C&&(C={...C,position:C.position||"Player",team:C.team||(C.team_id===r.home_team_id?r.home_team:r.away_team)}),T(C),console.log("Data loading completed successfully")}catch(r){const A=r instanceof Error?r.message:"An unknown error occurred";console.error("Error in fetchData:",A,r),f(A)}finally{l(!1),console.log("Loading state set to false")}})()},[n]),m)return e("div",{className:"min-h-screen bg-background flex items-center justify-center",children:t("div",{className:"flex flex-col items-center space-y-4",children:[e(qe,{className:"h-12 w-12 animate-spin text-primary"}),e("p",{className:"text-lg text-muted-foreground",children:"Loading astrological insights..."})]})});if(B)return e("div",{className:"min-h-screen bg-background flex items-center justify-center",children:t("div",{className:"flex flex-col items-center space-y-4",children:[e(Ae,{className:"h-12 w-12 text-destructive"}),e("p",{className:"text-lg text-destructive",children:B})]})});if(!i)return null;const F=typeof x=="number"?x:0,oe=(s=>{const h=typeof s=="number"?s:0;return h>=70?"text-green-500":h>=40?"text-yellow-500":"text-red-500"})(F),ue=(s=>{const h=typeof s=="string"?s.toLowerCase():"",r={nba:{color:"from-orange-500 to-red-600",icon:"🏀"},nfl:{color:"from-green-600 to-green-800",icon:"🏈"},mlb:{color:"from-blue-500 to-blue-700",icon:"⚾"},ncaa:{color:"from-purple-500 to-indigo-600",icon:"🏈"},default:{color:"from-gray-600 to-gray-800",icon:"🏆"}};return r[h]||r.default})(typeof i.sport=="string"?i.sport:void 0),ge=(s,h="N/A")=>s==null?h:String(s),ee=(s,h="N/A")=>s==null?h:typeof s=="string"||typeof s=="number"||Re.isValidElement(s)?s:String(s),De=s=>typeof s!="string"?"SPORT":s.toUpperCase(),fe=ge(i.home_team,"Home Team"),pe=ge(i.away_team,"Away Team"),ye=(s,h)=>t("div",{className:"my-6 bg-gray-800/50 p-4 rounded-xl",children:[t("h3",{className:"font-semibold text-lg mb-3",children:[s," Players"]}),e("div",{className:"flex flex-wrap gap-4",children:h.length===0?e("span",{className:"text-gray-400",children:"No players found for this team."}):h.map(r=>t("div",{className:"border border-gray-700 rounded-lg p-3 bg-gray-800/70 w-[140px]",children:[r.image_url&&e("img",{src:r.image_url,alt:r.name,className:"w-14 h-14 rounded-full object-cover mx-auto mb-2"}),e("div",{className:"font-medium text-center",children:r.name}),e("div",{className:"text-xs text-gray-400 text-center",children:r.position})]},r.id))})]});return e("div",{className:"min-h-screen bg-background p-4 md:p-8",children:t("div",{className:"max-w-6xl mx-auto space-y-6",children:[t(Pe,{variant:"ghost",className:"mb-2 hover:bg-accent/50 transition-colors text-foreground",onClick:()=>o(-1),children:[e(Be,{className:"h-4 w-4 mr-2 text-primary"}),t("span",{className:"font-medium",children:["Back to ",De(i.sport)]})]}),t(J,{children:[e(de,{children:t("div",{className:"flex items-center bg-blue-800/50 px-3 py-1 rounded-full border border-blue-700/50",children:[e(Ue,{className:"h-4 w-4 mr-1.5 text-blue-200"}),e("span",{className:"text-sm font-medium text-blue-100",children:V})]})}),t(Q,{children:[t("div",{className:"flex items-center mb-2",children:[e("span",{className:"text-4xl mr-3 text-blue-200",children:typeof ue.icon=="string"?ue.icon:"🏆"}),t("div",{children:[t("h1",{className:"text-2xl font-bold",children:[fe," vs ",pe]}),t("div",{className:"flex items-center text-muted-foreground mt-1 text-sm",children:[e(ze,{className:"h-4 w-4 mr-1.5"}),e("span",{children:ne}),e("span",{className:"mx-2",children:"•"}),e(Ye,{className:"h-4 w-4 mr-1.5"}),e("span",{children:K(i.venue)})]})]})]}),t("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"space-y-6",children:[t(J,{children:[e(de,{className:"pb-2",children:e(Te,{className:"text-lg",children:"Sportsbook Outlook"})}),e(Q,{children:i&&i.odds&&typeof i.odds=="object"?(()=>{const s=i.odds,h=i.home_team||"Home",r=i.away_team||"Away",A=i.home_team_color||"#2563eb",E=i.away_team_color||"#dc2626";let v=null,z=A,Y=E;return s.home,s.away,typeof s.home=="number"&&typeof s.away=="number"&&(s.home<s.away?(v=h,z=A,Y=E,s.home,s.away):(v=r,z=E,Y=A,s.away,s.home)),t("div",{className:"rounded-xl p-4 bg-gradient-to-r",style:{background:`linear-gradient(90deg, ${z} 70%, ${Y} 100%)`},children:[t("div",{className:"flex items-center justify-between mb-2",children:[t("div",{className:"flex-1 text-lg font-bold text-white flex items-center",children:[e("span",{className:"mr-2",children:h}),e("span",{className:`px-2 py-1 rounded text-xs ml-1 font-semibold ${v===h?"bg-white/80 text-black":"bg-black/30 text-white/80"}`,children:s.home>0?`+${s.home}`:s.home}),v===h&&e("span",{className:"ml-2 text-xs font-semibold bg-green-400/80 text-black px-2 py-0.5 rounded",children:"Favorite"})]}),e("span",{className:"mx-3 text-white font-bold",children:"vs"}),t("div",{className:"flex-1 text-lg font-bold text-white flex items-center justify-end",children:[e("span",{className:`px-2 py-1 rounded text-xs mr-1 font-semibold ${v===r?"bg-white/80 text-black":"bg-black/30 text-white/80"}`,children:s.away>0?`+${s.away}`:s.away}),e("span",{children:r}),v===r&&e("span",{className:"ml-2 text-xs font-semibold bg-green-400/80 text-black px-2 py-0.5 rounded",children:"Favorite"})]})]}),t("div",{className:"flex justify-between items-center mt-2",children:[t("div",{className:"text-sm text-white/90",children:[e("span",{className:"font-semibold",children:"Spread: "}),e("span",{children:typeof s.spread=="number"?s.spread>0?`+${s.spread}`:s.spread:"N/A"})]}),t("div",{className:"text-sm text-white/90",children:[e("span",{className:"font-semibold",children:"Over/Under: "}),e("span",{children:typeof s.over_under=="number"?s.over_under:"N/A"})]})]})]})})():e("div",{className:"text-center text-gray-400",children:"Sportsbook odds not available."})})]}),t(J,{children:[e(de,{className:"pb-2",children:e(Te,{className:"text-lg",children:"Astrological Overview"})}),e(Q,{children:t("div",{className:"space-y-4",children:[t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-muted-foreground",children:"Overall Astro Score:"}),t("div",{className:"flex items-center",children:[e("div",{className:"w-24 bg-gray-200 rounded-full h-2 mr-2",children:e("div",{className:"h-2 rounded-full bg-gradient-to-r from-blue-500 to-violet-500",style:{width:`${x}%`}})}),t("span",{className:`font-semibold ${oe}`,children:[x,"%"]})]})]}),t("div",{children:[e("h4",{className:"text-sm font-semibold mb-2",children:"Key Astrological Influences:"}),e("ul",{className:"space-y-2",children:(()=>{const s=[{aspect:"Mercury Retrograde",influence:0,description:"Communication and decision-making may be affected. Stay adaptable."},{aspect:"Moon Phase",influence:0,description:"The current moon phase can impact player mood and energy."},{aspect:"Sun-Mars Aspect",influence:0,description:"Sun-Mars alignments can boost assertiveness and drive."}],h=Array.isArray(g)&&g.length>0?[...g.slice(0,3)]:[];for(;h.length<3;)h.push(s[h.length]);return h.map((r,A)=>t("li",{className:"flex items-start",children:[e(Ne,{className:"h-4 w-4 text-amber-500 mt-0.5 mr-1.5 flex-shrink-0"}),t("div",{children:[e("span",{className:"text-sm font-medium",children:r.aspect}),e("p",{className:"text-xs text-muted-foreground",children:r.description})]})]},A))})()})]}),t("div",{children:[e("h4",{className:"text-sm font-semibold mb-2",children:"Player with Highest Astro Impact:"}),e("div",{className:"flex items-center p-2 bg-accent/50 rounded-lg",children:p?t(ve,{children:[e("div",{className:"h-8 w-8 rounded-full bg-primary/20 flex items-center justify-center mr-2",children:e("span",{className:"text-xs font-bold",children:ee(p==null?void 0:p.position,"")})}),t("div",{children:[e("div",{className:"text-sm font-medium",children:ee(p==null?void 0:p.name,"")}),e("div",{className:"text-xs text-muted-foreground",children:ee(p==null?void 0:p.team,"")})]}),t("div",{className:"ml-auto flex items-center",children:[t("span",{className:"text-xs font-semibold text-amber-500",children:[ee(Math.round((p==null?void 0:p.astro_influence)??0),""),"%"]}),e(Ne,{className:"h-3 w-3 text-amber-500 ml-1"})]})]}):e("span",{className:"text-xs text-muted-foreground",children:"No player data"})})]})]})})]})]}),t("div",{className:"space-y-6",children:[t("div",{className:"relative group",children:[e("div",{className:"absolute -inset-1 bg-gradient-to-r from-green-400 to-emerald-500 rounded-xl opacity-75 group-hover:opacity-100 transition duration-200 blur-sm"}),t(J,{className:"relative bg-white rounded-xl shadow-lg overflow-hidden h-full",children:[e("div",{className:"absolute top-0 right-0 px-3 py-1 bg-green-100 text-green-800 text-xs font-bold rounded-bl-lg",children:"RECOMMENDED"}),t(Q,{className:"p-6",children:[t("div",{className:"flex items-center mb-4",children:[e("div",{className:"p-2 rounded-full bg-green-100 text-green-600 mr-3",children:e(Ke,{className:"h-5 w-5"})}),e("h3",{className:"text-lg font-bold text-gray-800",children:"Recommended Bet"})]}),t("div",{className:"space-y-4",children:[t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-gray-600",children:"Selection:"}),t("span",{className:"font-semibold text-gray-800",children:[ee(x>=60?i.home_team:i.away_team,"N/A")," to Win"]})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-gray-600",children:"Confidence:"}),t("div",{className:"flex items-center",children:[e("div",{className:"h-1.5 bg-gray-200 rounded-full overflow-hidden",children:e("div",{className:"h-1.5 rounded-full bg-gradient-to-r from-green-500 to-emerald-400",style:{width:`${F}%`}})}),t("span",{className:"font-semibold text-green-600",children:[F,"%"]})]})]}),t("div",{className:"pt-3 mt-2 border-t border-gray-100",children:[t("p",{className:"text-sm text-gray-600",children:[F>=70?"Strong":F>=50?"Moderate":"Slight"," astrological advantage with multiple positive indicators."]}),e("ul",{className:"mt-2 space-y-1 text-sm text-green-600",children:g.slice(0,2).map((s,h)=>t("li",{className:"flex items-start",children:[e(Ee,{className:"h-4 w-4 mt-0.5 mr-1.5 flex-shrink-0"}),e("span",{children:s.description})]},`rec-${h}`))})]})]})]})]})]}),t("div",{className:"relative group",children:[e("div",{className:"absolute -inset-1 bg-gradient-to-r from-blue-400 to-indigo-500 rounded-xl opacity-75 group-hover:opacity-100 transition duration-200 blur-sm"}),t(J,{className:"relative bg-white rounded-xl shadow-lg overflow-hidden h-full",children:[e("div",{className:"absolute top-0 right-0 px-3 py-1 bg-blue-100 text-blue-800 text-xs font-bold rounded-bl-lg",children:"ALTERNATIVE"}),t(Q,{className:"p-6",children:[t("div",{className:"flex items-center mb-4",children:[e("div",{className:"p-2 rounded-full bg-blue-100 text-blue-600 mr-3",children:e(Ie,{className:"h-5 w-5"})}),e("h3",{className:"text-lg font-bold text-gray-800",children:"Alternative Play"})]}),e("div",{className:"space-y-4",children:i.odds&&typeof i.odds=="number"&&Math.abs(i.odds)>0?t(ve,{children:[t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-gray-600",children:"Type:"}),t("span",{className:"font-semibold",children:[i.odds>0?"Underdog":"Favorite"," Spread"]})]}),t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-gray-600",children:"Line:"}),t("span",{className:"font-mono font-semibold",children:[i.odds>0?"+":"",i.odds]})]}),t("div",{className:"pt-3 mt-2 border-t border-gray-100",children:[t("p",{className:"text-sm text-gray-600",children:[x>=60?"Good":"Fair"," value based on astrological factors and team performance metrics."]}),t("ul",{className:"mt-2 space-y-1 text-blue-600",children:[t("li",{className:"flex items-start text-sm",children:[e(Ee,{className:"h-4 w-4 mt-0.5 mr-1.5 flex-shrink-0"}),t("span",{children:[x>=60?"Favorable":"Neutral"," planetary alignments"]})]}),t("li",{className:"flex items-start text-sm",children:[e(Ze,{className:"h-4 w-4 mt-0.5 mr-1.5 flex-shrink-0"}),e("span",{children:"Positive momentum indicators"})]})]})]})]}):e("div",{className:"text-center py-4",children:e("p",{className:"text-gray-500 text-sm",children:"Check back closer to game time for spread recommendations"})})})]})]})]}),t("div",{className:"relative group",children:[e("div",{className:"absolute -inset-1 bg-gradient-to-r from-amber-400 to-orange-500 rounded-xl opacity-75 group-hover:opacity-100 transition duration-200 blur-sm"}),t(J,{className:"relative bg-white rounded-xl shadow-lg overflow-hidden h-full",children:[e("div",{className:"absolute top-0 right-0 px-3 py-1 bg-amber-100 text-amber-800 text-xs font-bold rounded-bl-lg",children:"CAUTION"}),t(Q,{className:"p-6",children:[t("div",{className:"flex items-center mb-4",children:[e("div",{className:"p-2 rounded-full bg-amber-100 text-amber-600 mr-3",children:e(Oe,{className:"h-5 w-5"})}),e("h3",{className:"text-lg font-bold text-gray-800",children:"Exercise Caution"})]}),t("div",{className:"space-y-4",children:[t("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-gray-600",children:"Avoid:"}),t("span",{className:"font-semibold",children:[x>=50?i.away_team:i.home_team," Moneyline"]})]}),t("div",{className:"pt-3 mt-2 border-t border-gray-100",children:[t("p",{className:"text-sm text-gray-600",children:[x>=70?"High":"Moderate"," risk based on current astrological conditions and team dynamics."]}),t("ul",{className:"mt-2 space-y-1 text-amber-600",children:[t("li",{className:"flex items-start text-sm",children:[e(Ve,{className:"h-4 w-4 mt-0.5 mr-1.5 flex-shrink-0"}),e("span",{children:"Challenging planetary alignments"})]}),t("li",{className:"flex items-start text-sm",children:[e(Ae,{className:"h-4 w-4 mt-0.5 mr-1.5 flex-shrink-0"}),e("span",{children:"Potential performance volatility"})]}),x>=70&&t("li",{className:"flex items-start text-sm",children:[e(Ge,{className:"h-4 w-4 mt-0.5 mr-1.5 flex-shrink-0"}),e("span",{children:"Consider alternative betting options"})]})]})]})]})]})]})]})]})]})]})]}),i&&t("div",{className:"mt-8 space-y-6",children:[ye(fe,b),ye(pe,_)]})]})})};export{dt as default};
//# sourceMappingURL=EventDetails-CpQwHJdB.js.map
