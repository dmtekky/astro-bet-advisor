const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/main-BDfILoKw.js","assets/main-nq7PIrMk.css"])))=>i.map(i=>d[i]);
import{c as j,y as D,b as a,j as l,d as f,A as U,e as F,r as p,_ as O,s as $,B,m as I}from"./main-BDfILoKw.js";import{d as M,c as H}from"./card-CC9ncavt.js";import{B as V}from"./badge-CJuzmin7.js";import{S as h}from"./skeleton-DHL3vfoL.js";import{a as q,A as Q}from"./alert-Sqq6S7Qg.js";import{C as S}from"./calendar-DtJsCdzD.js";import{U as k}from"./users-C6uxgrdu.js";import{G as Y}from"./GameCard-Cu4jeEUe.js";import"./index-CP622Ca8.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=j("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=j("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),X=[{id:"nba",name:"NBA",icon:"🏀"},{id:"mlb",name:"MLB",icon:"⚾"},{id:"nfl",name:"NFL",icon:"🏈",comingSoon:!0},{id:"boxing",name:"Boxing",icon:"🥊",comingSoon:!0},{id:"soccer",name:"Soccer",icon:"⚽",comingSoon:!0},{id:"ncaa",name:"NCAA FB",icon:"🏈",comingSoon:!0},{id:"nhl",name:"NHL",icon:"🏒",comingSoon:!0}],Z=({className:i="",isHeader:s=!1})=>{const c=D(),n=c.pathname==="/dashboard";return a("nav",{className:`${i} ${s?"hidden md:flex":""}`,children:a("ul",{className:`flex ${s?"space-x-6":"flex-wrap justify-center gap-4"}`,children:X.map(o=>{const x=n&&new URLSearchParams(c.search).get("sport")===o.id;return a("li",{children:l(f,{to:`/dashboard?sport=${o.id}`,className:`relative flex items-center space-x-2 px-3 py-2 rounded-md transition-colors ${x?"bg-primary text-primary-foreground font-medium":"text-foreground/70 hover:bg-accent hover:text-accent-foreground"} ${o.comingSoon?"opacity-60":""}`,onClick:N=>{o.comingSoon&&N.preventDefault()},children:[a("span",{className:"text-lg",children:o.icon}),s&&l("div",{className:"flex items-center",children:[a("span",{children:o.name}),o.comingSoon&&a("span",{className:"ml-1.5 text-[10px] bg-amber-100 text-amber-800 px-1.5 py-0.5 rounded-full",children:"Soon"})]})]})},o.id)})})})},K=()=>{const i=D(),s=i.pathname==="/dashboard",c=i.pathname==="/teams",n=i.pathname.includes("/upcoming-games"),o=i.pathname.includes("/profile");return a("div",{className:"fixed bottom-0 left-0 right-0 bg-background border-t border-border z-40 md:hidden",children:l("nav",{className:"flex items-center justify-around h-16",children:[l(f,{to:"/dashboard",className:`flex flex-col items-center justify-center w-full h-full ${s?"text-primary":"text-muted-foreground"}`,children:[a(J,{className:`h-5 w-5 ${s?"text-primary":""}`}),a("span",{className:"text-xs mt-1",children:"Home"})]}),l(f,{to:"/upcoming-games",className:`flex flex-col items-center justify-center w-full h-full ${n?"text-primary":"text-muted-foreground"}`,children:[a(S,{className:`h-5 w-5 ${n?"text-primary":""}`}),a("span",{className:"text-xs mt-1",children:"Games"})]}),l(f,{to:"/teams",className:`flex flex-col items-center justify-center w-full h-full ${c?"text-primary":"text-muted-foreground"}`,children:[a(k,{className:`h-5 w-5 ${c?"text-primary":""}`}),a("span",{className:"text-xs mt-1",children:"Teams"})]}),l(f,{to:"/profile",className:`flex flex-col items-center justify-center w-full h-full ${o?"text-primary":"text-muted-foreground"}`,children:[a(W,{className:`h-5 w-5 ${o?"text-primary":""}`}),a("span",{className:"text-xs mt-1",children:"Profile"})]})]})})},G=({children:i})=>{const{searchQuery:s,setSearchQuery:c,handleSearch:n}=U();return l("div",{className:"min-h-screen bg-white flex flex-col",children:[a("main",{className:"flex-1 container py-4 md:py-6 mt-16 bg-white",children:i}),a(K,{}),a("footer",{className:"border-t border-gray-200 py-6 md:py-8 bg-white mt-8",children:l("div",{className:"container",children:[l("div",{className:"mb-6 hidden md:block",children:[a("h3",{className:"text-center text-lg font-semibold mb-4",children:"Popular Sports"}),a(Z,{})]}),l("div",{className:"pt-4 md:pt-6 border-t border-gray-200 text-center text-sm text-gray-600",children:[l("p",{children:["© ",new Date().getFullYear()," Venusian Labs. All rights reserved."]}),a("p",{className:"text-xs mt-1",children:"Powered by The Odds API, Sports Game Odds API, and Swiss Ephemeris"})]})]})})]})},ee={mlb:"6b78d3c9-d104-4f15-a985-4e9953258c3b",nba:"8d91bd64-4609-47cf-abc1-17a2057a612d",nfl:"5eb41c0c-d9c4-4ea3-9254-c60bddac1777",nhl:"7fc9bf67-39e2-4b59-aaf1-0dcb53ca75e2"},v={nba:"NBA",mlb:"MLB",nfl:"NFL",nhl:"NHL",soccer:"Soccer",tennis:"Tennis",mma:"MMA",ncaa:"NCAA",ncaab:"NCAA Basketball",ncaaf:"NCAA Football",golf:"Golf",esports:"eSports",cfl:"CFL",boxing:"Boxing"},me=()=>{const{leagueId:i}=F(),s=i&&Object.keys(v).includes(i)?i:"nba",c=ee[s],[n,o]=p.useState([]),[x,N]=p.useState([]),[L,b]=p.useState(!0),[w,y]=p.useState(null),[z,R]=p.useState(0);p.useEffect(()=>{async function g(){if(console.log("[LeaguePage] leagueId:",s,"dbLeagueId:",c),!c){o([]),y("Invalid or unsupported league selected."),b(!1);return}try{b(!0),y(null);let t,u=[];if(s==="nba")try{u=await(await O(async()=>{const{fetchNbaTeams:d}=await import("./main-BDfILoKw.js").then(e=>e.av);return{fetchNbaTeams:d}},__vite__mapDeps([0,1]))).fetchNbaTeams(),t={data:u,error:null},console.log("[LeaguePage] NBA teams fetched from nba_teams:",u)}catch(d){t={data:null,error:d},console.error("[LeaguePage] Error fetching NBA teams:",d)}else t=await $.from("teams").select(`
              id, name, abbreviation, logo_url, city, 
              primary_color, secondary_color, full_name, 
              external_id, is_active, last_updated, league_id,
              venue_name, venue_city, venue_state, venue_capacity,
              venue_surface, venue_zip, venue_latitude, venue_longitude
            `).eq("league_id",c),console.log("[LeaguePage] teams query result:",t);const m=await $.from("games").select(`
            id, external_id, league_id, home_team_id, away_team_id, venue_id, game_date, game_time_utc, status, home_score, away_score, home_odds, away_odds, spread, over_under, created_at, updated_at,
            leagues:league_id(name, key),
            home_team:home_team_id(*),
            away_team:away_team_id(*)
          `).gt("game_date",new Date().toISOString()).order("game_date",{ascending:!0}).limit(10);if(t.error)console.error("Error fetching teams:",t.error),y(t.error.message);else if(t.data){console.log("[LeaguePage] Raw team data:",t.data);const d=t.data.map(e=>{const r={id:String(e.id),name:e.name,abbreviation:e.abbreviation,logo_url:e.logo_url||null,city:e.city,primary_color:e.primary_color||null,secondary_color:e.secondary_color||null,sport:s,external_id:e.external_id,external_team_id:e.external_team_id,is_active:e.is_active??!0,last_updated:e.last_updated||null,league_id:e.league_id,full_name:e.full_name||e.name,venue_name:e.venue_name||null,venue_city:e.venue_city||null,venue_state:e.venue_state||null,venue_capacity:e.venue_capacity||null,venue_surface:e.venue_surface||null,venue_zip:e.venue_zip||null,venue_latitude:e.venue_latitude||null,venue_longitude:e.venue_longitude||null};return s==="nba"&&console.log(`[LeaguePage] NBA Team ${e.name} - external_team_id:`,e.external_team_id),r});o(d)}if(m.error)console.error("Error fetching games:",m.error),w||y(m.error.message);else if(m.data){const d=m.data.map(e=>{var T,C,P,E;const r=((T=e.leagues)==null?void 0:T.key)||"other";let _=r;return r==="mlb"||r==="4424"?_="mlb":r==="nba"||r==="4387"?_="nba":r==="nfl"||r==="4391"?_="nfl":r==="nhl"||r==="4380"?_="nhl":r!=null&&r.toLowerCase().includes("soccer")&&(_="soccer"),{id:e.id,external_id:e.external_id,league_id:e.league_id,home_team_id:e.home_team_id,away_team_id:e.away_team_id,venue_id:e.venue_id,game_date:e.game_date,game_time_utc:e.game_time_utc,status:e.status,home_score:e.home_score,away_score:e.away_score,home_odds:e.home_odds,away_odds:e.away_odds,spread:e.spread,over_under:e.over_under,odds:[e.home_odds?{market:"Moneyline",outcome:"Home",price:e.home_odds}:null,e.away_odds?{market:"Moneyline",outcome:"Away",price:e.away_odds}:null,e.spread?{market:"Spread",outcome:"Home",price:e.spread}:null,e.over_under?{market:"Total",outcome:"Over",price:e.over_under}:null].filter(Boolean),created_at:e.created_at,updated_at:e.updated_at,sport:_,start_time:e.game_date&&e.game_time_utc?`${e.game_date}T${e.game_time_utc}`:e.updated_at||new Date().toISOString(),league_name:((C=e.leagues)==null?void 0:C.name)||void 0,home_team_name:((P=e.home_team)==null?void 0:P.name)||void 0,away_team_name:((E=e.away_team)==null?void 0:E.name)||void 0}});N(d)}}catch(t){console.error("Error loading data:",t),y("Failed to load league data. Please try again.")}finally{b(!1)}}g()},[c,z]);const A=()=>{R(g=>g+1)};return a("div",{className:"pb-16 md:pb-0",children:a(G,{children:a("div",{className:"px-3 sm:px-4 md:px-6 lg:px-8 py-4",children:(()=>{var g;return L?l("div",{className:"space-y-8",children:[l("div",{className:"flex items-center mb-8",children:[a(h,{className:"h-12 w-12 rounded-full mr-4"}),l("div",{className:"space-y-2",children:[a(h,{className:"h-6 w-48"}),a(h,{className:"h-4 w-64"})]})]}),l("div",{className:"mb-12",children:[a(h,{className:"h-8 w-48 mb-6"}),a("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3,4].map(t=>a(h,{className:"h-40 w-full rounded-lg"},t))})]}),l("div",{children:[a(h,{className:"h-8 w-48 mb-6"}),a("div",{className:"grid gap-4 grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5",children:[1,2,3,4,5,6,7,8,9,10].map(t=>a(h,{className:"h-32 w-full rounded-lg"},t))})]})]}):w?a("div",{className:"max-w-2xl mx-auto py-8",children:l(Q,{variant:"destructive",children:[a(q,{children:w}),a(B,{onClick:A,variant:"outline",className:"mt-4 w-fit",children:"Retry"})]})}):l("div",{className:"space-y-6 sm:space-y-8",children:[a(I.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full",children:l(M,{className:"border-0 shadow-lg bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-900 overflow-hidden relative group",children:[a("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-500/5 to-purple-600/5 dark:from-indigo-500/10 dark:to-purple-600/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),a("div",{className:"relative z-10 p-6 md:p-8",children:l("div",{className:"flex flex-col items-start",children:[a("div",{className:"inline-flex items-center mb-2",children:a("span",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-sm font-semibold px-3 py-1 rounded-full",children:v[s]||"LEAGUE"})}),a("h1",{className:"text-3xl md:text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-slate-900 to-slate-700 dark:from-white dark:to-slate-200 mb-2",children:v[s]||"League"}),l("div",{className:"flex items-center space-x-4 text-sm text-slate-600 dark:text-slate-300 mb-4",children:[l("span",{className:"flex items-center",children:[a(k,{className:"h-4 w-4 mr-1.5"}),n.length," Teams"]}),a("span",{className:"h-1 w-1 rounded-full bg-slate-300 dark:bg-slate-600"}),l("span",{className:"flex items-center",children:[a(S,{className:"h-4 w-4 mr-1.5"}),x.length," Upcoming Games"]})]}),l("p",{className:"text-slate-600 dark:text-slate-300 text-base max-w-2xl",children:["View team details, schedules, and performance metrics for the ",((g=v[s])==null?void 0:g.toLowerCase())||"league",". Get insights, stats, and analysis to stay ahead of the game."]})]})})]})}),x.length>0&&l("div",{className:"mb-8 sm:mb-12",children:[l("h2",{className:"text-xl sm:text-2xl font-bold text-white mb-4 sm:mb-6 flex items-center",children:[a(S,{className:"mr-2 h-5 w-5 sm:h-6 sm:w-6"}),"Upcoming Games"]}),a("div",{className:"grid gap-3 sm:gap-4 grid-cols-2 md:grid-cols-2 lg:grid-cols-3",children:x.map((t,u)=>{const m=s==="nba"?n.find(r=>r.external_team_id===t.home_team_id||String(r.external_id)===String(t.home_team_id)||r.id===t.home_team_id):n.find(r=>r.id===t.home_team_id),d=s==="nba"?n.find(r=>r.external_team_id===t.away_team_id||String(r.external_id)===String(t.away_team_id)||r.id===t.away_team_id):n.find(r=>r.id===t.away_team_id);if(u<5&&console.log("GameCard",{idx:u,gameId:t.id,homeTeamId:t.home_team_id,awayTeamId:t.away_team_id,homeTeam:m,awayTeam:d}),!m||!d)return console.warn(`Missing team data for game ${t.id}`),null;const e=r=>({...r,external_id:String(r.external_id),primary_color:r.primary_color||void 0,secondary_color:r.secondary_color||void 0,id:r.id,name:r.name,abbreviation:r.abbreviation,logo_url:r.logo_url||void 0,city:r.city,sport:r.sport});return a(Y,{game:t,homeTeam:e(m),awayTeam:e(d),defaultLogo:"/placeholder-team.png"},t.id)}).filter(Boolean)})]}),n.length>0&&l("div",{children:[l("h2",{className:"text-xl sm:text-2xl font-bold text-white mb-4 sm:mb-6 flex items-center",children:[a(k,{className:"mr-2 h-5 w-5 sm:h-6 sm:w-6"}),"Teams"]}),a("div",{className:"grid gap-3 sm:gap-4 grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6",children:n.map(t=>a(f,{to:`/teams/${t.id}`,className:"block h-full group-hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1 active:scale-95",children:a(I.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2},className:"h-full flex flex-col",children:a(M,{className:"h-full border border-slate-200 dark:border-slate-700 shadow-sm bg-gradient-to-br from-white to-slate-50 dark:from-slate-700 dark:to-slate-800/90 group hover:border-primary/30 dark:hover:border-primary/50 transition-colors duration-300 overflow-hidden",children:l(H,{className:"p-2 sm:p-3 md:p-4 flex flex-col items-center h-full",children:[a("div",{className:"relative mb-2 sm:mb-3 flex-1 flex items-center justify-center w-full",children:a("div",{className:"relative bg-white/80 dark:bg-slate-600/50 p-1.5 sm:p-2 rounded-full shadow-sm",children:a("img",{src:t.logo_url||"/placeholder-team.png",alt:t.name,className:"h-12 w-12 sm:h-14 sm:w-14 md:h-16 md:w-16 object-contain transition-transform duration-300 group-hover:scale-110",onError:u=>{u.target.src="/placeholder-team.png"},loading:"lazy",draggable:"false"})})}),l("div",{className:"w-full text-center",children:[a("p",{className:"text-slate-800 dark:text-white font-medium text-xs sm:text-sm line-clamp-1",children:t.name}),t.venue_city&&a("div",{className:"mt-1",children:a(V,{variant:"outline",className:"text-[10px] sm:text-xs bg-white/50 dark:bg-slate-700/50 border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-200",children:t.venue_city})})]})]})})})},t.id))})]}),n.length===0&&!L&&l("div",{className:"text-center py-12",children:[a("p",{className:"text-gray-400 mb-4",children:"No teams found for this league"}),a(B,{variant:"outline",onClick:A,className:"mt-2",children:"Retry Loading Teams"})]})]})})()})})})};export{me as default};
//# sourceMappingURL=LeaguePage-Bklae_Hk.js.map
